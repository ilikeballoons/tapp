(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{167:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(1);function r(e){var t=e.oneOfType([e.number,e.string]);return{apiResponse:e.shape({status:e.oneOf(["success","error"]).isRequired,message:e.string,payload:e.any}),apiResponseSuccess:e.shape({status:e.oneOf(["success"]).isRequired,message:e.string,payload:e.any}),apiResponseError:e.shape({status:e.oneOf(["error"]).isRequired,message:e.string.isRequired,payload:e.any}),idOnly:e.shape({id:t}),session:e.shape({id:t,start_date:e.string,end_date:e.string,name:e.string.isRequired}),contractTemplateMinimal:e.shape({template_file:e.string}),contractTemplate:e.shape({template_file:e.string,template_name:e.string}),position:e.shape({position_code:e.string.isRequired,position_title:e.string,hours_per_assignment:e.number,start_date:e.string,end_date:e.string,contract_template_id:t,duties:e.string,qualifications:e.string,ad_hours_per_assignment:e.number,ad_num_assignments:e.number,ad_open_date:e.string,ad_close_date:e.string,desired_num_assignments:e.number,current_enrollment:e.number,current_waitlisted:e.number,instructor_ids:e.arrayOf(t),instructor_preference:e.arrayOf(e.shape({preference_level:e.number,applicant_id:t,instructor_id:t}))}),instructor:e.shape({first_name:e.string.isRequired,last_name:e.string.isRequired,email:e.string,utorid:e.string.isRequired}),assignment:e.shape({start_date:e.string,end_date:e.string,note:e.string,contract_override_pdf:e.string,applicant_id:t.isRequired,position_id:t.isRequired,active_offer_status:e.oneOf(["accepted","rejected","withdrawn","provisional","pending","no_offer",null])}),applicant:e.shape({utorid:e.string.isRequired,student_number:e.string,first_name:e.string.isRequired,last_name:e.string.isRequired,email:e.string,phone:e.string}),wageChunk:e.shape({start_date:e.string,end_date:e.string,hours:e.number,rate:e.number}),reportingTag:e.shape({name:e.string}),offer:e.shape({first_name:e.string,last_name:e.string,email:e.string,position_code:e.string,position_title:e.string,position_start_date:e.string,position_end_date:e.string,first_time_ta:e.bool,instructor_contact_desc:e.string,pay_period_desc:e.string,installments:e.number,ta_coordinator_name:e.string,ta_coordinator_email:e.string,emailed_date:e.string,status:e.string,accepted_date:e.string,rejected_date:e.string,withdrawn_date:e.string}),application:e.shape({session_id:t,comments:e.string,program:e.string,department:e.string,previous_uoft_experience:e.string,yip:e.number,annotation:e.string,applicant_id:t,position_preference:e.arrayOf(e.shape({preference_level:e.number,position_id:t}))}),user:e.shape({utorid:e.string,roles:e.arrayOf(e.string)})}}r(n.n(a).a)},252:function(e,t,n){"use strict";n.r(t);var a=n(5),r=n.n(a),i=n(9),s=n(15),o=n(13),c=n(14),u=n(130),l=n.n(u),d={sessions:[{id:1,start_date:"2019-09-08T00:00:00.000Z",end_date:"2019-12-31T00:00:00.000Z",name:"2019 Fall",rate1:45.55,rate2:47.33},{id:2,start_date:"2020-01-01T00:00:00.000Z",end_date:"2020-04-30T00:00:00.000Z",name:"2021 Spring",rate1:45.55,rate2:null}],available_contract_templates:[{template_file:"/math/default.html"},{template_file:"/math/default2018.html"},{template_file:"/math/invigilate.html"},{template_file:"/math/invigilate2014.html"},{template_file:"/math/oto.html"}],contract_templates:[{id:1,template_name:"standard",template_file:"/math/default.html"},{id:2,template_name:"oto",template_file:"/math/oto.html"},{id:3,template_name:"standard",template_file:"/math/default2018.html"},{id:4,template_name:"invigilate",template_file:"/math/invigilate.html"}],contract_templates_by_session:{1:[1,2],2:[3,4]},instructors:[{id:1e3,last_name:"Smith",first_name:"Henry",email:"hery.smith@utoronto.ca",utorid:"smithh"},{id:1001,last_name:"Garcia",first_name:"Emily",email:"emily.garcia@utoronto.ca",utorid:"garciae"},{id:1002,last_name:"Miller",first_name:"Megan",email:"megan.miller@utoronto.ca",utorid:"millerm"},{id:1003,last_name:"Beera",first_name:"Lizzy",email:"lizzy.beera@utoronto.ca",utorid:"beeral"}],positions_by_session:{1:[10,11,14,15,16],2:[12,13]},positions:[{id:10,position_code:"MAT135H1F",position_title:"Calculus I",hours_per_assignment:70,start_date:"2019-09-08T00:00:00.000Z",end_date:"2019-12-31T00:00:00.000Z",contract_template_id:1,duties:"Tutorials",qualifications:"Teaching skill",ad_hours_per_assignment:70,ad_num_assignments:15,ad_open_date:"2019-08-01T00:00:00.000Z",ad_close_date:"2019-08-15T00:00:00.000Z",desired_num_assignments:15,current_enrollment:1200,current_waitlisted:200,instructor_ids:[1e3,1001],instructor_preferences:[{preference_level:2,applicant_id:2e3,instructor_id:1e3},{preference_level:1,applicant_id:2002,instructor_id:1e3},{preference_level:-1,applicant_id:2005,instructor_id:1001},{preference_level:1,applicant_id:2002,instructor_id:1001},{preference_level:1,applicant_id:2006,instructor_id:1001}]},{id:11,position_code:"MAT136H1F",position_title:"Calculus II",hours_per_assignment:70,start_date:"2019-09-08T00:00:00.000Z",end_date:"2019-12-31T00:00:00.000Z",contract_template_id:2,instructor_ids:[]},{id:12,position_code:"CSC135H1F",position_title:"Computer Fun",hours_per_assignment:70,start_date:"2019-09-08T00:00:00.000Z",end_date:"2019-12-31T00:00:00.000Z",duties:"Tutorials",contract_template_id:3,instructor_ids:[1e3],instructor_preferences:[{preference_level:-1,applicant_id:2005,instructor_id:1e3},{preference_level:2,applicant_id:2001,instructor_id:1e3},{preference_level:1,applicant_id:2006,instructor_id:1e3}]},{id:13,position_code:"MAT235H1F",position_title:"Calculus III",hours_per_assignment:70,start_date:"2019-09-08T00:00:00.000Z",end_date:"2019-12-31T00:00:00.000Z",contract_template_id:3,instructor_ids:[1002],instructor_preferences:[{preference_level:2,applicant_id:2e3,instructor_id:1002},{preference_level:1,applicant_id:2002,instructor_id:1002}]},{instructor_ids:[1002],position_code:"CSC100H1S",position_title:"Computers for Humans",hours_per_assignment:100,duties:"Some combination of marking, invigilating, tutorials, office hours, and the help centre.",contract_template_id:1,start_date:"2021-01-01T00:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z",id:14},{instructor_ids:[1e3],position_code:"MAT137Y1Y",position_title:"Calculus!",hours_per_assignment:250,duties:"Some combination of marking, invigilating, tutorials, office hours, and the help centre.",contract_template_id:1,start_date:"2019-09-02T00:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z",qualifications:"Skilled Proofs Reader",current_enrollment:1500,current_waitlisted:78,desired_num_assignments:22,id:15},{instructor_ids:[1001],position_code:"MAT135H1F Head TA",position_title:"Calculus I",hours_per_assignment:225,duties:"Top-notch Head TA Stuff",contract_template_id:1,start_date:"2019-09-02T00:00:00.000Z",end_date:"2019-12-31T00:00:00.000Z",desired_num_assignments:3,id:16}],applicants:[{id:2e3,utorid:"weasleyr",student_number:"89013443",first_name:"Ron",last_name:"Weasley",email:"ron@potter.com",phone:"543-223-9993"},{id:2001,utorid:"potterh",student_number:"999666999",first_name:"Harry",last_name:"Potter",email:"harry@potter.com"},{id:2002,utorid:"smithb",email:"smithb@mail.utoronto.ca",first_name:"Bethany",last_name:"Smith",student_number:"131382748"},{id:2003,utorid:"wilsonh",email:"wilsonh@mail.utoronto.ca",first_name:"Hanna",last_name:"Wilson",student_number:"600366904"},{id:2004,utorid:"molinat",email:"molinat@mail.utoronto.ca",first_name:"Troy",last_name:"Molina",student_number:"328333023"},{id:2005,utorid:"howeyb",email:"howeyb@mail.utoronto.ca",first_name:"Brett",last_name:"Howey",student_number:"329613524"},{id:2006,utorid:"brownd",email:"brownd@mail.utoronto.ca",first_name:"David",last_name:"Brown",student_number:"29151485"}],assignments_by_session:{1:[100,101,102,103,104,105,106,107,108,109],2:[]},assignments:[{id:100,position_id:10,applicant_id:2001,hours:90},{id:101,position_id:10,applicant_id:2005,hours:95},{note:"",position_id:16,applicant_id:2e3,start_date:"2019-09-02T00:00:00.000Z",end_date:"2019-12-31T00:00:00.000Z",id:102},{note:"",position_id:16,applicant_id:2002,start_date:"2019-09-02T00:00:00.000Z",end_date:"2019-12-31T00:00:00.000Z",id:103},{note:"",position_id:15,applicant_id:2001,start_date:"2019-09-02T00:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z",id:104},{note:"",position_id:15,applicant_id:2002,start_date:"2019-09-02T00:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z",id:105},{note:"",position_id:15,applicant_id:2005,start_date:"2019-09-02T00:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z",id:106},{note:"",position_id:15,applicant_id:2e3,start_date:"2019-09-02T00:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z",id:107},{note:"",position_id:15,applicant_id:2006,start_date:"2019-09-02T00:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z",id:108},{note:"",position_id:14,applicant_id:2002,start_date:"2021-01-01T00:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z",id:109}],wage_chunks:[{id:3e3,assignment_id:100,hours:20,start_date:"2019-09-08T00:00:00.000Z",end_date:"2019-12-31T00:00:00.000Z",rate:10.01},{id:3001,assignment_id:100,hours:35,start_date:"2020-01-01T00:00:00.000Z",end_date:"2020-04-20T00:00:00.000Z",rate:12.02},{id:3002,assignment_id:101,hours:95,start_date:"2019-09-01T00:00:00.000Z",end_date:"2020-04-20T00:00:00.000Z",rate:null},{id:3003,assignment_id:102,hours:225,start_date:"2019-09-02T00:00:00.000Z",end_date:"2019-12-31T00:00:00.000Z"},{id:3004,assignment_id:103,hours:225,start_date:"2019-09-02T00:00:00.000Z",end_date:"2019-12-31T00:00:00.000Z"},{id:3005,assignment_id:104,hours:125,start_date:"2019-09-02T00:00:00.000Z",end_date:"2019-12-31T05:00:00.000Z"},{id:3006,assignment_id:104,hours:125,start_date:"2020-01-01T05:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z"},{id:3007,assignment_id:105,hours:125,start_date:"2019-09-02T00:00:00.000Z",end_date:"2019-12-31T05:00:00.000Z"},{id:3008,assignment_id:105,hours:125,start_date:"2020-01-01T05:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z"},{id:3009,assignment_id:106,hours:125,start_date:"2019-09-02T00:00:00.000Z",end_date:"2019-12-31T05:00:00.000Z"},{id:3010,assignment_id:106,hours:125,start_date:"2020-01-01T05:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z"},{id:3011,assignment_id:107,hours:100,start_date:"2019-09-02T00:00:00.000Z",end_date:"2019-12-31T05:00:00.000Z"},{id:3012,assignment_id:107,hours:100,start_date:"2020-01-01T05:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z"},{id:3013,assignment_id:108,hours:100,start_date:"2019-09-02T00:00:00.000Z",end_date:"2019-12-31T05:00:00.000Z"},{id:3014,assignment_id:108,hours:100,start_date:"2020-01-01T05:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z"},{id:3015,assignment_id:109,hours:100,start_date:"2021-01-01T00:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z"}],offers:[{id:1e4,assignment_id:100,status:"withdrawn"},{id:10001,assignment_id:100,status:"pending"},{id:10002,assignment_id:101,status:"accepted"},{id:10003,assignment_id:102,status:"withdrawn"}],applications:[{comments:"",program:"Phd",department:"Computer Science",previous_uoft_ta_experience:"Last year I TAed a bunch",yip:2,annotation:"",session_id:1,applicant_id:2e3,position_preferences:[{preference_level:2,position_id:10},{preference_level:3,position_id:15}]},{comments:"",program:"UG",department:"Computer Science",previous_uoft_ta_experience:"",yip:2,annotation:"",session_id:1,applicant_id:2001,position_preferences:[{preference_level:0,position_id:12},{preference_level:3,position_id:13}]},{comments:"",program:"Phd",department:"Math",previous_uoft_ta_experience:"",yip:2,annotation:"",session_id:1,applicant_id:2002,position_preferences:[{preference_level:3,position_id:10},{preference_level:3,position_id:13},{preference_level:2,position_id:12},{preference_level:0,position_id:11}]},{comments:"",program:"Phd",department:"Computer Science",previous_uoft_ta_experience:"",yip:2,annotation:"",session_id:1,applicant_id:2005,position_preferences:[{preference_level:2,position_id:10},{preference_level:3,position_id:13},{preference_level:0,position_id:12},{preference_level:1,position_id:11}]},{comments:"",program:"UG",department:"Computer Science",previous_uoft_ta_experience:"",yip:2,annotation:"",session_id:1,applicant_id:2006,position_preferences:[{preference_level:3,position_id:10},{preference_level:0,position_id:13},{preference_level:2,position_id:12}]},{comments:"",program:"UG",department:"Math",previous_uoft_ta_experience:"",yip:3,annotation:"",session_id:2,applicant_id:2002,position_preferences:[{preference_level:3,position_id:10},{preference_level:3,position_id:13},{preference_level:2,position_id:12},{preference_level:0,position_id:11}]},{comments:"",program:"MSc",department:"Computer Science",previous_uoft_ta_experience:"",yip:2,annotation:"",session_id:2,applicant_id:2003,position_preferences:[{preference_level:3,position_id:10},{preference_level:3,position_id:13},{preference_level:2,position_id:12},{preference_level:0,position_id:11}]},{comments:"",program:"UG",department:"Computer Science",previous_uoft_ta_experience:"",yip:4,annotation:"",session_id:2,applicant_id:2004,position_preferences:[{preference_level:1,position_id:10},{preference_level:3,position_id:13}]}],users:[{email:"hery.smith@utoronto.ca",utorid:"smithh",roles:["admin","instructor"]},{email:"emily.garcia@utoronto.ca",utorid:"garciae",roles:["instructor"]},{email:"megan.miller@utoronto.ca",utorid:"millerm",roles:["instructor"]},{email:"lizzy.beera@utoronto.ca",utorid:"beeral",roles:["instructor"]}],active_user:"smithh"},p=n(74),f=n(36),m=n(18),h=n(19),_=n(3),v=n(8),g=n(27);function b(){for(var e=0,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];for(var r=0,i=n;r<i.length;r++){var s=i[r];e+=+s}return e}function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id",n=e.map((function(e){return+e[t]})).filter((function(e){return null!=e})),a=Math.max.apply(Math,[0].concat(Object(g.a)(n)));return isNaN(a)?"id-"+Math.round(1e4*Math.random()):a+1}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id";return t.find((function(t){return t[n]==e[n]}))}function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id";return e=e.map((function(e){return""+e})),t.filter((function(t){return e.includes(""+t[n])}))}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t.splice(t.indexOf(e),1)}function w(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{id:{required:!0,unique:!0}},a=0,r=Object.entries(n);a<r.length;a++){var i=Object(v.a)(r[a],2),s=i[0],o=i[1];if(o.required&&(null==e[s]||""===e[s]))return"Property ".concat(s," cannot be empty");if(o.unique&&S(e,t,s))return"Duplicate entry exists for property ".concat(s," with value ").concat(e[s])}return!1}var j=function(){function e(t,n){Object(o.a)(this,e),this.data=t,this.ownData=n}return Object(c.a)(e,[{key:"findAll",value:function(){return Object(g.a)(this.ownData)}},{key:"find",value:function(e){return this.rawFind(e)}},{key:"rawFind",value:function(e){return null==e?null:null!=e.id?S(e,this.ownData):S({id:e},this.ownData)}},{key:"delete",value:function(e){if(!(e=this.rawFind(e)))throw new Error("Cannot delete object ".concat(JSON.stringify(e)));return y(e,this.ownData),e}},{key:"unusedId",value:function(){if(!this.ownData)throw new Error("Cannot get unused ID when `ownData` hasn't been set");return E(this.ownData)}},{key:"create",value:function(e){var t=E(this.ownData),n=Object(_.a)(Object(_.a)({},e),{},{id:t});return this.ownData.push(n),n}},{key:"validateNew",value:function(){throw new Error("Subclasses must impliment `validateNew()`")}},{key:"validateProp",value:function(e,t,n){return!0}},{key:"updateIfFound",value:function(e){var t=this.rawFind(e);if(!t)return null;for(var n in e)null!=n&&(this.validateProp(n,e[n],e.id),t[n]=e[n]);return t}},{key:"upsert",value:function(e){return this.rawFind(e)?this.updateIfFound(e):(this.validateNew(e),this.create(e))}}]),e}();function C(e){return null==e||0===e.length?"":1===e.length?e[0]:2===e.length?"".concat(e[0]," and ").concat(e[1]):((e=Object(g.a)(e))[e.length-1]="and "+e[e.length-1],e.join(", "))}function T(e){return e?C(e.map((function(e){return"".concat(e.first_name," ").concat(e.last_name," <").concat(e.email,">")}))):[]}function A(e){var t,n={},a=Object(s.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value,i=r.rate,o=r.start_date,c=r.end_date,u=r.hours;o=new Date(o),c=new Date(c),n[i]=n[i]||{hours:0,rate:i};var l=n[i];l.hours+=u,l.start_date=l.start_date||o,l.start_date=Math.min(l.start_date,o),l.end_date=l.end_date||c,l.end_date=Math.max(l.end_date,c)}}catch(d){a.e(d)}finally{a.f()}return C(Object.values(n).map((function(e){var t=e.hours,n=e.rate,a=e.start_date,r=e.end_date;return a=new Date(a),r=new Date(r),"".concat(t," hours at $").concat(n,"/hour from ").concat(a.toLocaleDateString("EN-ca",{month:"long",day:"numeric",year:"numeric"})," to ").concat(r.toLocaleDateString("EN-ca",{month:"long",day:"numeric",year:"numeric"}))})))}var k=n(4),N=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e,e.sessions)}return Object(c.a)(n,[{key:"create",value:function(e){var t=Object(p.a)(Object(f.a)(n.prototype),"create",this).call(this,e);return this.data.assignments_by_session[t.id]=[],t}},{key:"validateNew",value:function(e){var t=w(e,this.ownData,{name:{required:!0,unique:!0}});if(t)throw new Error(t)}},{key:"validateProp",value:function(e,t,n){if("name"===e){if(void 0===t||0===t.length)throw new Error("Property ".concat(e," cannot be empty or undefined."));var a=w({name:t},this.findAll().filter((function(e){return e.id!==n})),{name:{unique:!0}});if(a)throw new Error(a)}return!0}}]),n}(j),I={get:{"/sessions":Object(k.b)({func:function(e){return new N(e).findAll()},summary:"Get all available sessions",returns:k.d.arrayOf(k.a.session)})},post:{"/sessions":Object(k.b)({func:function(e,t,n){return new N(e).upsert(n)},summary:"Upsert a session",returns:k.a.session,posts:k.a.session}),"/sessions/delete":Object(k.b)({func:function(e,t,n){return new N(e).delete(n)},summary:"Delete a session",posts:k.a.idOnly,returns:k.a.session})}},x=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).ownData=a.data.contract_templates,a}return Object(c.a)(n,[{key:"validateNew",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=w(e,this.ownData,{template_name:{required:!0},template_file:{required:!0}});if(n)throw new Error(n);if(t){var a=w(e,this.findAllBySession(t),{template_name:{required:!0,unique:!0}});if(a)throw new Error(a)}}},{key:"findAllBySession",value:function(e){var t=new N(this.data).find(e);return O(this.data.contract_templates_by_session[t.id]||[],this.ownData)}},{key:"upsertBySession",value:function(e,t){var n=new N(this.data).find(t);this.find(e)||this.validateNew(e,n);var a=this.upsert(e);return this.data.contract_templates_by_session[n.id]=this.data.contract_templates_by_session[n.id]||[],this.data.contract_templates_by_session[n.id].push(a.id),a}}]),n}(j),D={get:{"/available_contract_templates":Object(k.b)({func:function(e){return Object(g.a)(e.available_contract_templates)},summary:"Get all available contract templates (these are literal files on the server).",returns:k.d.arrayOf(k.a.contractTemplateMinimal)}),"/sessions/:session_id/contract_templates":Object(k.b)({func:function(e,t){return new x(e).findAllBySession(t.session_id)},summary:"Get contract templates associated with this session.",returns:k.d.arrayOf(k.a.contractTemplate)})},post:{"/sessions/:session_id/contract_templates":Object(k.b)({func:function(e,t,n){return new x(e).upsertBySession(n,t.session_id)},summary:"Associate a position template with a session; this method upserts",posts:k.a.contractTemplate,returns:k.a.contractTemplate})}},F=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e,e.instructors)}return Object(c.a)(n,[{key:"validateNew",value:function(e){var t=w(e,this.ownData,{utorid:{required:!0,unique:!0},first_name:{required:!0},last_name:{required:!0}});if(t)throw new Error(t)}},{key:"delete",value:function(e){var t=this.find(e);if(!t)throw new Error("Cannot find instructor matching ".concat(JSON.stringify(e)));Object(p.a)(Object(f.a)(n.prototype),"delete",this).call(this,t);var a,r=Object(s.a)(this.data.positions);try{for(r.s();!(a=r.n()).done;){var i=a.value;(i.instructor_ids||[]).includes(t.id)&&y(t.id,i.instructor_ids)}}catch(o){r.e(o)}finally{r.f()}return t}}]),n}(j),P={get:{"/instructors":Object(k.b)({func:function(e){return new F(e).findAll()},summary:"Get a list of all instructors",returns:k.d.arrayOf(k.a.instructor)})},post:{"/instructors":Object(k.b)({func:function(e,t,n){return new F(e).upsert(n)},summary:"Upsert an instructor",posts:k.a.instructor,returns:k.a.instructor}),"/instructors/delete":Object(k.b)({func:function(e,t,n){return new F(e).delete(n)},summary:"Delete an instructor (removes from all positions)",posts:k.a.idOnly,returns:k.a.instructor})}},R=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e,e.positions)}return Object(c.a)(n,[{key:"validateNew",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t){var n=w(e,this.findAllBySession(t),{position_code:{required:!0,unique:!0}});if(n)throw new Error(n)}}},{key:"find",value:function(e){for(var t=this.rawFind(e),n=null,a=0,r=Object.entries(this.data.positions_by_session);a<r.length;a++){var i=Object(v.a)(r[a],2),s=i[0];if(i[1].includes(t.id)){n=s;break}}return Object(_.a)(Object(_.a)({},t),{},{session_id:n})}},{key:"getSession",value:function(e){return new N(this.data).find({id:e.session_id})}},{key:"getContractTemplate",value:function(e){return new x(this.data).find({id:e.contract_template_id})}},{key:"getInstructors",value:function(e){var t=this;return e.instructor_ids?e.instructor_ids.map((function(e){return new F(t.data).find({id:e})})):[]}},{key:"delete",value:function(e){var t=this.rawFind(e);if(!t)throw new Error("Cannot find position matching ".concat(JSON.stringify(e)));Object(p.a)(Object(f.a)(n.prototype),"delete",this).call(this,t);for(var a=0,r=Object.values(this.data.positions_by_session);a<r.length;a++){var i=r[a];i.includes(t.id)&&y(t.id,i)}return t}},{key:"findAllBySession",value:function(e){var t=new N(this.data).find(e);return O(this.data.positions_by_session[t.id]||[],this.ownData)}},{key:"upsertBySession",value:function(e,t){var n=new N(this.data).rawFind(t);this.rawFind(e)||(this.validateNew(e,n),e.start_date=void 0===e.start_date?n.start_date:e.start_date,e.end_date=void 0===e.end_date?n.end_date:e.end_date);var a=this.upsert(e);return this.data.positions_by_session[n.id]=this.data.positions_by_session[n.id]||[],this.data.positions_by_session[n.id].push(a.id),a}},{key:"findAssociatedSession",value:function(e){var t=this,n=this.find(e);if(!n)throw new Error("Could not associated session because there is no position matching ".concat(JSON.stringify(e)));var a=Object.keys(this.data.positions_by_session).find((function(e){return t.data.positions_by_session[e].includes(n.id)}));return null!=a?+a:a}}]),n}(j),U={get:{"/sessions/:session_id/positions":Object(k.b)({func:function(e,t){return new R(e).findAllBySession(t.session_id)},summary:"Get positions associated with this session.",returns:k.d.arrayOf(k.a.position)})},post:{"/sessions/:session_id/positions":Object(k.b)({func:function(e,t,n){return new R(e).upsertBySession(n,t.session_id)},summary:"Upsert a position associated with a session. If a new position is created, it will be automatically associated with the given session",posts:k.a.position,returns:k.a.position}),"/positions":Object(k.b)({func:function(e,t,n){var a=S(n,e.positions);if(a)return Object.assign(a,n);throw new Error("Cannot find position with id=".concat(n.id))},summary:"Update a position",posts:k.a.position,returns:k.a.position}),"/positions/delete":Object(k.b)({func:function(e,t,n){return new R(e).delete(n)},summary:"Delete a position",posts:k.a.idOnly,returns:k.a.session})}},H=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e,e.wage_chunks)}return Object(c.a)(n,[{key:"validateNew",value:function(){}},{key:"findAllByAssignment",value:function(e){var t=this,n=new G(this.data).rawFind(e);if(!n)throw new Error("Could not find assignment matching ".concat(JSON.stringify(e)));return O([n.id],this.ownData,"assignment_id").map((function(e){return t.find(e)}))}},{key:"find",value:function(e){var t=this.rawFind(e),n=Object(_.a)({},t);if(null==n.rate){var a=this.getSession(e);if(null==a.rate2)n.rate=a.rate1;else{var r=new Date(e.start_date),i=new Date(e.end_date),s=new Date(a.start_date),o=new Date(s.getFullYear(),11,31);n.rate=r<=o&&i<=o?a.rate1:a.rate2}}return n}},{key:"getSession",value:function(e){var t=this.rawFind(e),n=new G(this.data).rawFind({id:t.assignment_id}),a=new G(this.data).getPosition(n);return new R(this.data).getSession(a)}},{key:"upsertByAssignment",value:function(e,t){var n=new G(this.data).rawFind(t);if(!n)throw new Error("Could not find assignment matching ".concat(JSON.stringify(t)));return this.upsert(Object(_.a)(Object(_.a)({},e),{},{assignment_id:n.id}))}},{key:"setAllByAssignment",value:function(e,t){var n=this,a=this.rawFind(t);if(!a)throw new Error("Could not find assignment matching ".concat(JSON.stringify(t)));var r,i=this.findAllByAssignment(t),o=Object(s.a)(i);try{for(o.s();!(r=o.n()).done;){var c=r.value;S(c,e)||this.delete(c)}}catch(u){o.e(u)}finally{o.f()}return e.forEach((function(e){return n.upsertByAssignment(e,a)})),this.findAllByAssignment(a)}}]),n}(j),L={get:{},post:{"/wage_chunks":Object(k.b)({func:function(e,t,n){return new H(e).upsert(n)},posts:k.a.wageChunk,summary:"Upsert a wage_chunk",returns:k.a.wageChunk}),"/wage_chunks/delete":Object(k.b)({func:function(e,t,n){return new H(e).delete(n)},posts:k.a.wageChunk,summary:"Delete a wage_chunk. Must have a valid id specified.",returns:k.a.wageChunk})}},B=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e,e.applications)}return Object(c.a)(n,[{key:"validateNew",value:function(e){var t=w(e,this.ownData,{session_id:{required:!0},applicant_id:{required:!0}});if(t)throw new Error(t)}},{key:"findAllBySession",value:function(e){var t=new N(this.data).find(e);if(!t)throw new Error("Cannot find applicant by session because session ".concat(JSON.stringify(e)," cannot be found"));return O([t.id],this.ownData,"session_id")}}]),n}(j),q={get:{"/sessions/:session_id/applications":Object(k.b)({func:function(e,t){return new B(e).findAllBySession(t.session_id)},summary:"Get all applications associated with the given session",returns:k.d.arrayOf(k.a.application)})},post:{"/applications":Object(k.b)({func:function(e,t,n){return new B(e).upsert(n)},summary:"Upsert an application",posts:k.a.application,returns:k.a.application})}},M=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e,e.applicants)}return Object(c.a)(n,[{key:"validateNew",value:function(e){var t=w(e,this.ownData,{utorid:{required:!0,unique:!0},first_name:{required:!0},last_name:{required:!0}});if(t)throw new Error(t)}},{key:"findAllBySession",value:function(e){var t=new N(this.data).find(e);if(!t)throw new Error("Cannot find applicant by session because session ".concat(JSON.stringify(e)," cannot be found"));var n=new B(this.data).findAllBySession(t),a=new G(this.data).findAllBySession(t);return O(Array.from(new Set(n.map((function(e){return e.applicant_id})).concat(a.map((function(e){return e.applicant_id}))))),this.ownData)}}]),n}(j),Z={get:{"/sessions/:session_id/applicants":Object(k.b)({func:function(e,t){return new M(e).findAllBySession(t.session_id)},summary:"Get all applicants associated with the given session",returns:k.d.arrayOf(k.a.applicant)}),"/applicants":Object(k.b)({func:function(e){return new M(e).findAll()},summary:"Get all applicants",returns:k.d.arrayOf(k.a.applicant)}),"/applicants/:applicant_id":Object(k.b)({func:function(e,t){return new M(e).find(t.applicant_id)},summary:"Get an applicant",returns:k.d.arrayOf(k.a.applicant)})},post:{"/applicants":Object(k.b)({func:function(e,t,n){return new M(e).upsert(n)},summary:"Upsert an applicant",posts:k.a.applicant,returns:k.a.applicant})}},G=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e,e.assignments)}return Object(c.a)(n,[{key:"validateNew",value:function(e){var t=w(e,[],{position_id:{required:!0},applicant_id:{required:!0}});if(t)throw new Error(t)}},{key:"findAllBySession",value:function(e){var t=this,a=new N(this.data).rawFind(e);return O(this.data.assignments_by_session[a.id]||[],this.ownData).map((function(e){return new n(t.data).find(e)}))}},{key:"getPosition",value:function(e){return new R(this.data).find({id:e.position_id})}},{key:"getApplicant",value:function(e){return new M(this.data).find({id:e.applicant_id})}},{key:"getWageChunkInfo",value:function(e){var t=new H(this.data).findAllByAssignment(e);return{hours:b.apply(void 0,Object(g.a)(t.map((function(e){return e.hours})))),wageChunks:t}}},{key:"getActiveOffer",value:function(e){return new W(this.data).findByAssignment(e)}},{key:"find",value:function(e){var t=this.rawFind(e);if(!t)return t;var n=Object(_.a)({},t),a=this.getWageChunkInfo(t).hours;Object.assign(n,{hours:a});var r=this.getActiveOffer(t);return r&&Object.assign(n,{active_offer_status:r.status}),n}},{key:"upsert",value:function(e){var t=this.find(Object(p.a)(Object(f.a)(n.prototype),"upsert",this).call(this,e)),a=new R(this.data).findAssociatedSession(t.position_id);if(a&&this.data.assignments_by_session[a].push(t.id),null==e.hours||+t.hours===+e.hours)return t;var r=new H(this.data).findAllByAssignment(t);if(0===r.length){var i,o=function(e,t){e=new Date(e),t=new Date(t);var n=new Date(e.getFullYear(),11,31),a=new Date(e.getFullYear(),12,1);return e<=n&&t>n?[{start_date:e.toISOString(),end_date:n.toISOString()},{start_date:a.toISOString(),end_date:t.toISOString()}]:[{start_date:e.toISOString(),end_date:t.toISOString()}]}(t.start_date,t.end_date),c=Object(s.a)(o);try{for(c.s();!(i=c.n()).done;){var u=i.value;new H(this.data).upsertByAssignment({hours:0,start_date:u.start_date,end_date:u.end_date},t)}}catch(v){c.e(v)}finally{c.f()}}r=new H(this.data).findAllByAssignment(t);var l,d=(+e.hours-+(this.find(t).hours||0))/r.length,m=Object(s.a)(r);try{for(m.s();!(l=m.n()).done;){var h=l.value;new H(this.data).upsert(Object(_.a)(Object(_.a)({},h),{},{hours:(h.hours||0)+d}))}}catch(v){m.e(v)}finally{m.f()}return this.find(t)}}]),n}(j),W=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e,e.offers)}return Object(c.a)(n,[{key:"findByAssignment",value:function(e){var t=O([this._ensureAssignment(e).id],this.data.offers,"assignment_id"),n=t[t.length-1];return n&&("accepted"===n.status||"rejected"===n.status||"pending"===n.status||"provisional"===n.status)?n:null}},{key:"_ensureAssignment",value:function(e){var t=new G(this.data).rawFind(e);if(!t)throw new Error("Could not find assignment matching ".concat(JSON.stringify(e)));return t}},{key:"getAssignment",value:function(e){return new G(this.data).find({id:e.assignment_id})}},{key:"find",value:function(e){var t=this.rawFind(e),n=this.getAssignment(t),a=new G(this.data).getWageChunkInfo(n),r=a.hours,i=a.wageChunks,s=new G(this.data).getPosition(n),o=new G(this.data).getApplicant(n),c=new R(this.data).getInstructors(s),u=new R(this.data).getContractTemplate(s),l=function(e){var t=e.map((function(e){return e.start_date})),n=e.map((function(e){return e.end_date}));return t.sort(),n.sort(),{start_date:t[0],end_date:n[n.length-1]}}(i),d=l.start_date,p=l.end_date;return Object(_.a)(Object(_.a)({accepted_date:null,rejected_date:null,withdrawn_date:null,signature:"",nag_count:0},t),{},{contract_template:u.template_file,contract_override_pdf:n.contract_override_pdf,first_name:o.first_name,last_name:o.last_name,email:o.email,position_code:s.position_code,position_title:s.position_title,position_start_date:d,position_end_date:p,first_time_ta:null,instructor_contact_desc:T(c),pay_period_desc:A(i),hours:r,ta_coordinator_name:"Dr. Coordinator",ta_coordinator_email:"coordinator@utoronto.ca"})}},{key:"withdrawByAssignment",value:function(e){var t=this.findByAssignment(this._ensureAssignment(e));return this.find(this.upsert(Object(_.a)(Object(_.a)({},t),{},{status:"withdrawn",withdrawn_date:(new Date).toISOString()})))}},{key:"rejectByAssignment",value:function(e){var t=this.findByAssignment(this._ensureAssignment(e));return this.find(this.upsert(Object(_.a)(Object(_.a)({},t),{},{status:"rejected",rejected_date:(new Date).toISOString()})))}},{key:"acceptByAssignment",value:function(e){var t=this.findByAssignment(this._ensureAssignment(e));return this.find(this.upsert(Object(_.a)(Object(_.a)({},t),{},{status:"accepted",accepted_date:(new Date).toISOString()})))}},{key:"emailByAssignment",value:function(e){var t=this.findByAssignment(this._ensureAssignment(e));return this.find(this.upsert(Object(_.a)(Object(_.a)({},t),{},{status:"pending",emailed_date:(new Date).toISOString()})))}},{key:"nagByAssignment",value:function(e){var t=this.findByAssignment(this._ensureAssignment(e));if(!t.emailed_date)throw new Error("The active offer for assignment with id=".concat(e.id," has not been emailed yet, so a nag email cannot be sent"));return this.find(this.upsert(Object(_.a)(Object(_.a)({},t),{},{nag_count:(t.nag_count||0)+1})))}},{key:"createByAssignment",value:function(e){var t=this._ensureAssignment(e);if(this.findByAssignment(t))throw new Error("An offer already exists for assignment=".concat(JSON.stringify(e)));return this.upsert(this.find(this.create({assignment_id:t.id,status:"provisional"})))}}]),n}(j),J={get:{"/sessions/:session_id/assignments":Object(k.b)({func:function(e,t){return new G(e).findAllBySession(t.session_id)},summary:"Get assignments associated with a session",returns:k.d.arrayOf(k.a.assignment)}),"/assignments/:assignment_id":Object(k.b)({func:function(e,t){return new G(e).find(t.assignment_id)},summary:"Get an assignment",returns:k.a.assignment}),"/assignments/:assignment_id/active_offer":Object(k.b)({func:function(e,t){return new G(e).getActiveOffer(t.assignment_id)},summary:"Get the active offer associated with an assignment",returns:k.a.offer}),"/assignments/:assignment_id/wage_chunks":Object(k.b)({func:function(e,t){return new G(e).getWageChunkInfo(t.assignment_id).wageChunks},summary:"Get the wage_chunks associated with an assignment",returns:k.d.arrayOf(k.a.wageChunk)})},post:{"/assignments":Object(k.b)({func:function(e,t,n){return new G(e).upsert(n)},posts:k.a.assignment,summary:"Upsert an assignment",returns:k.a.assignment}),"/assignments/:assignment_id/wage_chunks":Object(k.b)({func:function(e,t,n){return new H(e).setAllByAssignment(n,t.assignment_id)},summary:"Sets the wage chunks of an assignment to the specified list. The contents of the list are upserted. Omitted wage chunks are deleted.",posts:k.d.arrayOf(k.a.wageChunk),returns:k.d.arrayOf(k.a.wageChunk)}),"/assignments/:assignment_id/active_offer/withdraw":Object(k.b)({func:function(e,t){return new W(e).withdrawByAssignment(t.assignment_id)},summary:"Withdraws the active offer for the specified assignment",returns:k.a.offer}),"/assignments/:assignment_id/active_offer/reject":Object(k.b)({func:function(e,t){return new W(e).rejectByAssignment(t.assignment_id)},summary:"Rejects the active offer for the specified assignment",returns:k.a.offer}),"/assignments/:assignment_id/active_offer/accept":Object(k.b)({func:function(e,t){return new W(e).acceptByAssignment(t.assignment_id)},summary:"Accepts the active offer for the specified assignment",returns:k.a.offer}),"/assignments/:assignment_id/active_offer/create":Object(k.b)({func:function(e,t){return new W(e).createByAssignment(t.assignment_id)},summary:"Creates an offer for the specified assignment, provided there are no active offers for this assignment.",returns:k.a.offer}),"/assignments/:assignment_id/active_offer/email":Object(k.b)({func:function(e,t){return new W(e).emailByAssignment(t.assignment_id)},summary:"Emails the active offer for the specified assignment",returns:k.a.offer}),"/assignments/:assignment_id/active_offer/nag":Object(k.b)({func:function(e,t){return new W(e).nagByAssignment(t.assignment_id)},summary:"Sends a nag email for the active offer for the specified assignment which has already been emailed once",returns:k.a.offer})}},K=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e,e.users)}return Object(c.a)(n,[{key:"validateNew",value:function(e){var t=w(e,this.ownData,{utorid:{required:!0,unique:!0}});if(t)throw new Error(t)}},{key:"rawFind",value:function(e){return null==e?null:null!=e.id?S(e,this.ownData):null!=e.utorid?S(e,this.ownData,"utorid"):S({utorid:e},this.ownData,"utorid")}},{key:"setActiveUser",value:function(e){var t=this.find(e);if(!t)throw new Error("Cannot find user ".concat(JSON.stringify(e)," to set as active"));this.data.active_user=t.utorid}},{key:"getActiveUser",value:function(){return this.find(this.data.active_user)}}]),n}(j),V={get:{"/users":Object(k.b)({func:function(e){return new K(e).findAll()},summary:"Get all available users.",returns:k.d.arrayOf(k.a.user)}),"/active_user":Object(k.b)({func:function(e){return new K(e).getActiveUser()},summary:"Gets the currently active user.",returns:k.d.arrayOf(k.a.user),roles:["instructor","ta"]})},post:{"/users":Object(k.b)({func:function(e,t,n){return new K(e).upsert(n)},summary:"Upserts user info",returns:k.d.arrayOf(k.a.user),posts:k.a.user})}},z={},Y=function(){function e(t){Object(o.a)(this,e),this.data=t}return Object(c.a)(e,[{key:"getAllData",value:function(){return this.data}},{key:"makeSnapshot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"snapshot";return z[e]=JSON.stringify(this.getAllData()),this.getAllData()}},{key:"clearData",value:function(){var e=this;return this.makeSnapshot("beforeclear"),Object.keys(this.data).forEach((function(t){return e.data[t]="object"===typeof(n=e.data[t])?n instanceof Array?[]:{}:"string"===typeof n?"":n.constructor();var n})),this.getAllData()}},{key:"restoreSnapshot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"snapshot",t=JSON.parse(z[e]||"{}");return this.clearData(),Object.assign(this.data,t),this.getAllData()}}]),e}(),$={get:{"/debug/active_user":Object(k.b)({func:function(e){return new K(e).getActiveUser()},summary:"Gets the active user; in debug mode this is specified by posting to `active_user`.",returns:k.a.user}),"/debug/users":Object(k.b)({func:function(e){return new K(e).findAll()},summary:"Get a list of all users",returns:k.d.arrayOf(k.a.user)})},post:{"/debug/active_user":Object(k.b)({func:function(e,t,n){var a=new K(e),r=a.find(n);if(!r)throw new Error("Could not find user matching ".concat(JSON.stringify(n)));return a.setActiveUser(r),a.getActiveUser()},summary:"Sets the active user; this will override whatever credentials are passed to the server.",returns:k.d.arrayOf(k.a.user),posts:k.a.user}),"/debug/users":Object(k.b)({func:function(e,t,n){return new K(e).upsert(n)},summary:"Adds a user; this is done without any permission checks, so it can be used to bootstrap permissions during debug.",returns:k.d.arrayOf(k.a.user),posts:k.a.user}),"/debug/clear_data":Object(k.b)({func:function(e){return new Y(e).clearData()},summary:"Deletes all data in the database"}),"/debug/snapshot":Object(k.b)({func:function(e){return new Y(e).makeSnapshot()},summary:"Makes a snapshot of the current state of the database"}),"/debug/restore_snapshot":Object(k.b)({func:function(e){return new Y(e).restoreSnapshot()},summary:"Restores the last snapshot of the database"})}};n.d(t,"MockAPI",(function(){return Q})),n.d(t,"mockAPI",(function(){return X})),n.d(t,"mockData",(function(){return d}));var Q=function(){function e(t){var n=this;Object(o.a)(this,e),this.routePrefix="/api/v1",this.getRoutes=Object.assign({},I.get,D.get,U.get,P.get,J.get,Z.get,q.get,L.get,$.get,V.get,{"/all_data":Object(k.b)({func:function(e){return e},exclude:!0})}),this.postRoutes=Object.assign({},I.post,D.post,U.post,P.post,J.post,Z.post,q.post,L.post,$.post,V.post),this.apiGET=function(e){var t,a=Object(s.a)(n._getRoutesParsers);try{for(a.s();!(t=a.n()).done;){var r=t.value,i=r.match(e);if(i)try{return n.authenticateActiveUserBasedOnRole(i.role),{status:"success",message:"",payload:n.getRoutes[r.spec](n.data,i)}}catch(o){return{status:"error",message:o.toString()}}}}catch(c){a.e(c)}finally{a.f()}return{status:"error",message:"could not find route matching ".concat(e)}},this.apiPOST=function(e,t){var a,r=Object(s.a)(n._postRoutesParsers);try{for(r.s();!(a=r.n()).done;){var i=a.value,o=i.match(e);if(o)try{return n.authenticateActiveUserBasedOnRole(o.role),{status:"success",message:"",payload:n.postRoutes[i.spec](n.data,o,t)}}catch(c){return{status:"error",message:c.toString()}}}}catch(u){r.e(u)}finally{r.f()}return{status:"error",message:"could not find route matching ".concat(e)}},this.active=!1,this.data=t,this._getRoutesParsers=Object.keys(this.getRoutes).map((function(e){var t=new l.a("(/:role)"+e);return t.spec=e,t})),this._postRoutesParsers=Object.keys(this.postRoutes).map((function(e){var t=new l.a("(/:role)"+e);return t.spec=e,t}))}return Object(c.a)(e,[{key:"authenticateActiveUserBasedOnRole",value:function(e){if(null!=e){var t=new K(this.data).getActiveUser();if(null!=t&&!t.roles.includes(e))throw new Error("Not authenticated for accessing routes with prefix /".concat(e))}}},{key:"replaceGlobalFetch",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;this.active||(this.active=!0,this._origFetch=fetch,window.fetch=function(){var n=Object(i.a)(r.a.mark((function n(a){var i,s,o,c,u,l=arguments;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=l.length>1&&void 0!==l[1]?l[1]:{},s=new URL(a,"http://dummy.com"),a=(a=s.pathname).startsWith(e.routePrefix)?a.replace(e.routePrefix,""):a,"GET"===i.method?o=e.apiGET(a):("string"===typeof(c=i.body)&&(c=JSON.parse(c)),o=e.apiPOST(a,c)),console.log("MockAPI ".concat(i.method," Request."),a,i,"Reponding with",o),u=new Response(new Blob([JSON.stringify(o)],{type:"application/json"}),{status:200,statusText:"OK"}),n.abrupt("return",new Promise((function(e){window.setTimeout((function(){return e(u)}),t)})));case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}},{key:"restoreGlobalFetch",value:function(){this.active=!1,window.fetch=this._origFetch||fetch}}]),e}(),X=new Q(d)},4:function(e,t,n){"use strict";n.d(t,"d",(function(){return v})),n.d(t,"c",(function(){return w})),n.d(t,"b",(function(){return j})),n.d(t,"a",(function(){return g}));var a=n(3),r=n(31),i=n(15),s=n(8),o=n(27),c=n(13),u=n(14),l=n(1),d=n.n(l),p=n(130),f=n.n(p),m=n(167),h=function(){function e(t,n){Object(c.a)(this,e),this.name=t,this.args=n}return Object(u.a)(e,[{key:"toString",value:function(){return null==this.args?""+this.name:this.name+"("+this.args.join(", ")+")"}}]),e}();function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return e.concat([new h(t,n)])}var v=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a={get:function(t,a,r){if("callChain"===a)return n;if("toJSON"===a)return function(){return n};var i=Reflect.get(t,a,r);return i instanceof Object?e(i,_(n,a)):i},apply:function(t,a,r){var i=n.pop()||{name:"<root>"},s=Reflect.apply(t,a,r);return s instanceof Object?e(s,_(n,i.name,r)):s},ownKeys:function(e){return[].concat(Object(o.a)(Reflect.ownKeys(e)),["callChain","toJSON"])}};return new Proxy(t,a)}(d.a),g=Object(m.a)(v),b={string:"string",number:"number",bool:"boolean",object:"object",array:"array",any:{}};function E(e){var t={};if(e.callChain){var n=Object(s.a)(e.callChain,2),a=n[0],r=[];if(n[1]&&(t.required=!0),a.args)switch(a.name){case"shape":t.type="object",t.properties={};for(var i=0,o=Object.entries(a.args[0]);i<o.length;i++){var c=Object(s.a)(o[i],2),u=c[0],l=E(c[1]);l.required&&(r.push(u),delete l.required),t.properties[u]=l}r.length>0&&(t.required=r);break;case"arrayOf":t.type="array",t.items=E(a.args[0]);break;case"oneOf":t.type="string",t.enum=a.args[0];break;case"oneOfType":t.oneOf=a.args[0].map(E)}else b[a.name]&&(t.type=b[a.name])}else console.warn("Attempting to compute swagger values for non-wrapped object",e);return t}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"object"};return{type:"object",properties:{status:{type:"string",enum:["success","error"]},message:{type:"string"},payload:e},required:["status"]}}function O(e){for(var t=f()(e),n=Object.keys(t.match(t.spec)),a={},r=0,i=n;r<i.length;r++){var s=i[r];a[s]="{"+s+"}"}return{url:decodeURI(t.reverse(a)),templateVars:n}}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={responses:{default:{}}};if(!e)return n;var a=["admin"].concat(Object(o.a)(e.roles||[]));return n.summary="(prefixes: ".concat(a.map((function(e){return"/"+e})).join(", "),") ")+e.summary,t.length>0&&(n.parameters=t.map((function(e){return{name:e,in:"path",description:e,required:!0}}))),e.returns&&(n.responses.default={content:{"application/json":{schema:S(E(e.returns))}}}),e.posts&&(n.requestBody={content:{"application/json":{schema:E(e.posts)}}}),n}function w(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getRoutes,n=void 0===t?{}:t,a=e.postRoutes,r=void 0===a?{}:a,o={},c=0,u=Object.entries(n);c<u.length;c++){var l=Object(s.a)(u[c],2),d=l[0],p=l[1],f=O(d),m=f.url,h=f.templateVars;p.docs&&p.docs.exclude||(o[m]=Object.assign(o[m]||{},{get:y(p.docs,h)}))}for(var _=0,v=Object.entries(r);_<v.length;_++){var g=Object(s.a)(v[_],2),b=g[0],E=g[1],S=O(b),w=S.url,j=S.templateVars;E.docs&&E.docs.exclude||(o[w]=Object.assign(o[w]||{},{post:y(E.docs,j)}))}for(var C=Array.from(new Set(Object.keys(o).map((function(e){return e.split("/")[1]})).filter((function(e){return e})))),T=function(){var e=Object(s.a)(k[A],2),t=e[0],n=e[1],a=C.filter((function(e){return t.includes(e)}));n.get&&a.length>0&&(n.get.tags=a),n.post&&a.length>0&&(n.post.tags=a)},A=0,k=Object.entries(o);A<k.length;A++)T();var N,I={},x=Object(i.a)(Object.keys(o).sort());try{for(x.s();!(N=x.n()).done;){var D=N.value;I[D]=o[D]}}catch(F){x.e(F)}finally{x.f()}return I}function j(e){var t=e.func,n=e.exclude,i=void 0!==n&&n,s=Object(r.a)(e,["func","exclude"]),o=function(){return t.apply(void 0,arguments)};return o.docs=Object(a.a)({exclude:i},s),o}},409:function(e,t,n){e.exports=n(914)},418:function(e,t,n){},429:function(e,t){},836:function(e,t){},838:function(e,t){},847:function(e,t,n){},848:function(e,t,n){},911:function(e,t,n){},914:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(23),s=n.n(i),o=n(11),c=n(91),u=n(389),l=n(3),d=n(22),p=(n(418),n(929)),f=n(928),m=n(920),h=n(392),_=n(5),v=n.n(_),g=n(9),b=n(1),E=n.n(b),S=n(24),O=n(65),y=n.n(O),w={position:"tr",autoDismiss:10,title:"Error"},j=function(e){return Object(O.error)(Object(l.a)(Object(l.a)({},w),{},{title:"Error fetching data",message:e}))},C=function(e){return Object(O.error)(Object(l.a)(Object(l.a)({},w),{},{title:"Error updating/inserting data",message:e}))},T=function(e){return Object(O.error)(Object(l.a)(Object(l.a)({},w),{},{title:"Error deleting data",message:e}))},A=function(e){return Object(O.error)(Object(l.a)(Object(l.a)({},w),{},{title:"API Error",message:e}))},k=n(8),N=n(15),I=n(390),x=n.n(I),D=function(e,t){return{type:"API_INTERACTION_START",payload:{id:e,message:t}}},F=function(e){return{type:"API_INTERACTION_END",payload:{id:e}}};function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id";if(!Array.isArray(e))return e;var n,a={},r=Object(N.a)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;a[i[t]]=i}}catch(s){r.e(s)}finally{r.f()}return a}function R(e){return function(t){return{type:e,payload:t}}}function U(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a={},r={},i=Object(N.a)(n);try{for(i.s();!(t=i.n()).done;){var s=t.value;Object.hasOwnProperty.call(e,s)&&(r[s]=e[s])}}catch(c){i.e(c)}finally{i.f()}for(var o in e)Object.hasOwnProperty.call(r,o)||(a[o]=e[o]);return[a,r]}function H(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(a){if(null==a[e])return a;var r=U(a,[e]),i=Object(k.a)(r,2),s=i[0],o=i[1];return s[t]=n?o[e].map((function(e){return e.id})):o[e].id,s}}function L(e){var t=e.dispatcher,n=e.propTypes,a=e.name,r=e.description,i=e.onErrorDispatch;return function(){for(var e=arguments.length,s=new Array(e),o=0;o<e;o++)s[o]=arguments[o];return function(){var e=Object(g.a)(v.a.mark((function e(o){var c,u,l,d;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=function(e,t){E.a.checkPropTypes(e,t||{},"api action argument",a,(function(){c=!0}))},c=!1,Array.isArray(n))if(n.length!==s.length)c=!0;else for(l=0;l<n.length;l++)u(n[l],s[l]);else n&&u(n,s[0]);if(!c){e.next=6;break}return o(A("Invalid arguments to ".concat(a,' while attempting action "').concat(r,'"'))),e.abrupt("return");case 6:return d=x()(),o(D(d,r)),e.prev=8,e.next=11,o(t.apply(void 0,s));case 11:e.next=20;break;case 13:if(e.prev=13,e.t0=e.catch(8),!i){e.next=19;break}o(i instanceof Function?i(e.t0):A('Error encountered during "'.concat(r,'"'))),e.next=20;break;case 19:throw e.t0;case 20:return e.prev=20,o(F(d)),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[8,13,20,23]])})));return function(t){return e.apply(this,arguments)}}()}}var B=n(13),q=n(129),M=n(18),Z=n(19),G=n(406),W={credentials:"same-origin",headers:{"Content-Type":"application/json"}},J=function(e){Object(M.a)(n,e);var t=Object(Z.a)(n);function n(e){var a;Object(B.a)(this,n);var r=e.message;return a=t.call(this,r),Error.captureStackTrace&&Error.captureStackTrace(Object(q.a)(a),K),a.response=e,a.status=e.status,a}return n}(Object(G.a)(Error)),K=function(e){Object(M.a)(n,e);var t=Object(Z.a)(n);function n(e,a){var r;Object(B.a)(this,n);var i="Got status ".concat(e.status," ").concat(e.statusText," when fetching ").concat("/api/v1"+a);return r=t.call(this,{message:i}),Error.captureStackTrace&&Error.captureStackTrace(Object(q.a)(r),n),r.response=e,r.status=e.status,r}return n}(J);function V(e){return e.startsWith("/")?e:"/"+e}function z(e,t){return Y.apply(this,arguments)}function Y(){return(Y=Object(g.a)(v.a.mark((function e(t,n){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==t.status){e.next=7;break}return e.next=3,t.json();case 3:if("success"===(a=e.sent).status){e.next=6;break}throw new J(Object(l.a)({message:"Server response did not have `status === 'success`"},a));case 6:return e.abrupt("return",a.payload);case 7:throw new K(t,n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e){return Q.apply(this,arguments)}function Q(){return(Q=Object(g.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=V(t),e.next=3,fetch("/api/v1"+t,Object(l.a)(Object(l.a)({},W),{},{method:"GET"}));case 3:return n=e.sent,e.next=6,z(n,t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e){return ee.apply(this,arguments)}function ee(){return(ee=Object(g.a)(v.a.mark((function e(t){var n,a,r=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},t=V(t),e.next=4,fetch("/api/v1"+t,Object(l.a)(Object(l.a)({},W),{},{method:"POST",body:JSON.stringify(n)}));case 4:return a=e.sent,e.next=7,z(a,t);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var te=n(12),ne=n(44),ae=n(106);function re(e,t){var n=!1,a=e.map((function(e){return e.id===t.id?(n=1,t):e}));return n||a.push(t),a}function ie(e,t,n,a){var r;return r={},Object(te.a)(r,e,(function(e,t){return Object(l.a)(Object(l.a)({},e),{},{_modelData:t.payload})})),Object(te.a)(r,t,(function(e,t){return Object(l.a)(Object(l.a)({},e),{},{_modelData:re(e._modelData,t.payload)})})),Object(te.a)(r,n,(function(e,t){return Object(l.a)(Object(l.a)({},e),{},{_modelData:re(e._modelData,t.payload)})})),Object(te.a)(r,a,(function(e,t){var n=t.payload;return Object(l.a)(Object(l.a)({},e),{},{_modelData:e._modelData.filter((function(e){return e.id!==n.id}))})})),r}function se(e,t){var n=[];var a={id:Math.random(),path:n,pushToPath:function(e){n.unshift(e)}};e._storePath=a;var r=Object(ae.createReducer)(e,t);return r._storePath=a,r._localStoreSelector=function(e){return function(t){return function(e,t){if(e._storePath&&e._storePath.id===t.id)return e;try{var n,a=e,r=Object(N.a)(t.path);try{for(r.s();!(n=r.n()).done;){var i=n.value;a=a[i]}}catch(s){r.e(s)}finally{r.f()}return a}catch(o){console.error("Searching",e,"for local state with path",t.join("."),"but encountered an error")}return e}(t,e)}}(a),r}function oe(e){var t=[];for(var n=0,a=Object.entries(e);n<a.length;n++){var r=Object(k.a)(a[n],2),i=r[0],s=r[1];s._storePath&&(s._storePath.pushToPath(i),t.push(s._storePath.pushToPath))}var o=Object(ne.combineReducers)(e);return o._storePath={pushToPath:function(e){var n,a=Object(N.a)(t);try{for(a.s();!(n=a.n()).done;){(0,n.value)(e)}}catch(r){a.e(r)}finally{a.f()}}},o}var ce,ue=ie("FETCH_SESSIONS_SUCCESS","FETCH_ONE_SESSION_SUCCESS","UPSERT_ONE_SESSION_SUCCESS","DELETE_ONE_SESSION_SUCCESS"),le=se({_modelData:[],activeSession:null},Object(l.a)(Object(l.a)({},ue),{},Object(te.a)({},"SET_ACTIVE_SESSION",(function(e,t){return Object(l.a)(Object(l.a)({},e),{},{activeSession:t.payload})})))),de=se({users:[],active_user:{},active_role:"admin"},(ce={},Object(te.a)(ce,"FETCH_ACTIVE_USER_SUCCESS",(function(e,t){return Object(l.a)(Object(l.a)({},e),{},{active_user:t.payload})})),Object(te.a)(ce,"FETCH_USERS_SUCCESS",(function(e,t){return Object(l.a)(Object(l.a)({},e),{},{users:t.payload})})),Object(te.a)(ce,"SET_ACTIVE_USER_ROLE_SUCCESS",(function(e,t){return Object(l.a)(Object(l.a)({},e),{},{active_role:t.payload})})),ce)),pe=ie("FETCH_APPLICANTS_SUCCESS","FETCH_ONE_APPLICANT_SUCCESS","UPSERT_ONE_APPLICANT_SUCCESS","DELETE_ONE_APPLICANT_SUCCESS");function fe(e,t){var n,a=[],r=Object(N.a)(e);try{var i=function(){var e=n.value;t.some((function(t){return t.id===e.id}))||a.push(e)};for(r.s();!(n=r.n()).done;)i()}catch(s){r.e(s)}finally{r.f()}return a.length>0?e.concat(a):e}var me=se({_modelData:[]},Object(l.a)(Object(l.a)({},pe),{},Object(te.a)({},"ADD_APPLICANT_TO_SESSION_SUCCESS",(function(e,t){return Object(l.a)(Object(l.a)({},e),{},{_modelData:fe(e._modelData,t.payload)})})))),he=R("FETCH_APPLICANTS_SUCCESS"),_e=R("FETCH_ONE_APPLICANT_SUCCESS"),ve=R("UPSERT_ONE_APPLICANT_SUCCESS"),ge=R("DELETE_ONE_APPLICANT_SUCCESS"),be=L({name:"fetchApplicants",description:"Fetch applicants",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(){return function(){var e=Object(g.a)(v.a.mark((function e(t,n){var a,r,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=nn(n()),r=n().model.sessions.activeSession.id,e.next=4,$("/".concat(a,"/sessions/").concat(r,"/applicants"));case 4:i=e.sent,t(he(i));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}}),Ee=(L({name:"fetchApplicant",description:"Fetch applicant",propTypes:{id:E.a.any.isRequired},onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=nn(a()),t.next=3,$("/".concat(r,"/applicants/").concat(e.id));case 3:i=t.sent,n(_e(i));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),L({name:"upsertApplicant",description:"Add/insert applicant",propTypes:{},onErrorDispatch:function(e){return C(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=nn(a()),t.next=3,X("/".concat(r,"/applicants"),e);case 3:i=t.sent,n(ve(i));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}})),Se=(L({name:"deleteApplicant",description:"Delete applicant",propTypes:{id:E.a.any.isRequired},onErrorDispatch:function(e){return T(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i,s;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=nn(a()),i=a().model.sessions.activeSession.id,t.next=4,X("/".concat(r,"/sessions/").concat(i,"/applicants/delete"),e);case 4:s=t.sent,n(ge(s));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),me._localStoreSelector),Oe=Object(S.a)(Se,(function(e){return e._modelData})),ye=n(31),we=se({_modelData:[]},ie("FETCH_APPLICATIONS_SUCCESS","FETCH_ONE_APPLICATION_SUCCESS","UPSERT_ONE_APPLICATION_SUCCESS","DELETE_ONE_APPLICATION_SUCCESS")),je=ie("FETCH_POSITIONS_SUCCESS","FETCH_ONE_POSITION_SUCCESS","UPSERT_ONE_POSITION_SUCCESS","DELETE_ONE_POSITION_SUCCESS"),Ce=se({_modelData:[]},Object(l.a)(Object(l.a)({},je),{},Object(te.a)({},"ADD_INSTRUCTOR_TO_POSITION_SUCCESS",(function(e,t){var n=t.payload.position.id,a=t.payload.instructors;return Object(l.a)(Object(l.a)({},e),{},{_modelData:e._modelData.map((function(e){return e.id!==n?e:Object(l.a)(Object(l.a)({},e),{},{instructors:a})}))})})))),Te=se({_modelData:[]},ie("FETCH_INSTRUCTORS_SUCCESS","FETCH_ONE_INSTRUCTOR_SUCCESS","UPSERT_ONE_INSTRUCTOR_SUCCESS","DELETE_ONE_INSTRUCTOR_SUCCESS")),Ae=R("FETCH_INSTRUCTORS_SUCCESS"),ke=R("FETCH_ONE_INSTRUCTOR_SUCCESS"),Ne=R("UPSERT_ONE_INSTRUCTOR_SUCCESS"),Ie=R("DELETE_ONE_INSTRUCTOR_SUCCESS"),xe=L({name:"fetchInstructors",description:"Fetch instructors",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(){return function(){var e=Object(g.a)(v.a.mark((function e(t,n){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=nn(n()),e.next=3,$("/".concat(a,"/instructors"));case 3:r=e.sent,t(Ae(r));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}}),De=(L({name:"fetchInstructor",description:"Fetch instructor",propTypes:{id:E.a.any.isRequired},onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=nn(a()),t.next=3,$("/".concat(r,"/instructors/").concat(e.id));case 3:i=t.sent,n(ke(i));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),L({name:"upsertInstructor",description:"Add/insert instructor",propTypes:{},onErrorDispatch:function(e){return C(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=nn(a()),t.next=3,X("/".concat(r,"/instructors"),e);case 3:i=t.sent,n(Ne(i));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}})),Fe=(L({name:"deleteInstructor",description:"Delete instructor",propTypes:{id:E.a.any.isRequired},onErrorDispatch:function(e){return T(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=nn(a()),t.next=3,X("/".concat(r,"/instructors/delete"),e);case 3:i=t.sent,n(Ie(i));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),Te._localStoreSelector),Pe=Object(S.a)(Fe,(function(e){return e._modelData})),Re=ie("FETCH_CONTRACT_TEMPLATES_SUCCESS","FETCH_ONE_CONTRACT_TEMPLATE_SUCCESS","UPSERT_ONE_CONTRACT_TEMPLATE_SUCCESS","DELETE_ONE_CONTRACT_TEMPLATE_SUCCESS"),Ue=se({_modelData:[],all:[]},Object(l.a)(Object(l.a)({},Re),{},Object(te.a)({},"FETCH_ALL_CONTRACT_TEMPLATES_SUCCESS",(function(e,t){return Object(l.a)(Object(l.a)({},e),{},{all:t.payload})})))),He=R("FETCH_CONTRACT_TEMPLATES_SUCCESS"),Le=R("FETCH_ALL_CONTRACT_TEMPLATES_SUCCESS"),Be=R("UPSERT_ONE_CONTRACT_TEMPLATE_SUCCESS"),qe=R("DELETE_ONE_CONTRACT_TEMPLATE_SUCCESS"),Me=L({name:"fetchContractTemplates",description:"Fetch contract_templates",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(){return function(){var e=Object(g.a)(v.a.mark((function e(t,n){var a,r,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=nn(n()),r=n().model.sessions.activeSession.id,e.next=4,$("/".concat(a,"/sessions/").concat(r,"/contract_templates"));case 4:i=e.sent,t(He(i));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}}),Ze=L({name:"upsertContractTemplate",description:"Add/insert contract_template",propTypes:{},onErrorDispatch:function(e){return C(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i,s;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=nn(a()),i=a().model.sessions.activeSession.id,t.next=4,X("/".concat(r,"/sessions/").concat(i,"/contract_templates"),e);case 4:s=t.sent,n(Be(s));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),Ge=(L({name:"deleteContractTemplate",description:"Delete contract_template from a session",propTypes:{id:E.a.any.isRequired},onErrorDispatch:function(e){return T(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i,s;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=nn(a()),i=a().model.sessions.activeSession.id,t.next=4,X("/".concat(r,"/sessions/").concat(i,"/contract_templates/delete"),e);case 4:s=t.sent,n(qe(s));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),L({name:"fetchAllContractTemplates",description:"Fetch all available contract_templates",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(){return function(){var e=Object(g.a)(v.a.mark((function e(t,n){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=nn(n()),e.next=3,$("/".concat(a,"/available_contract_templates"));case 3:r=e.sent,t(Le(r));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}})),We=Ue._localStoreSelector,Je=Object(S.a)(We,(function(e){return e._modelData})),Ke=Object(S.a)(We,(function(e){return e.all})),Ve=R("FETCH_POSITIONS_SUCCESS"),ze=R("FETCH_ONE_POSITION_SUCCESS"),Ye=R("UPSERT_ONE_POSITION_SUCCESS"),$e=R("DELETE_ONE_POSITION_SUCCESS"),Qe=L({name:"fetchPositions",description:"Fetch positions",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(){return function(){var e=Object(g.a)(v.a.mark((function e(t,n){var a,r,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n().model.sessions.activeSession.id,r=nn(n()),e.next=4,$("/".concat(r,"/sessions/").concat(a,"/positions"));case 4:i=e.sent,t(Ve(i));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}}),Xe=(L({name:"fetchPosition",description:"Fetch position",propTypes:{id:E.a.any.isRequired},onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i,s;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a().model.sessions.activeSession.id,i=nn(a()),t.next=4,$("/".concat(i,"/sessions/").concat(r,"/positions/").concat(e.id));case 4:s=t.sent,n(ze(s));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),H("instructors","instructor_ids",!0)),et=H("contract_template","contract_template_id"),tt=H("instructor","instructor_id"),nt=H("applicant","applicant_id");function at(e){var t=U(e,["instructor_preferences"]),n=Object(k.a)(t,2),a=n[0],r=n[1];return r.instructor_preferences&&(a.instructor_preferences=r.instructor_preferences.map((function(e){return nt(tt(e))}))),et(Xe(a))}var rt=L({name:"upsertPosition",description:"Add/insert position",propTypes:{},onErrorDispatch:function(e){return C(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i,s;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a().model.sessions.activeSession.id,i=nn(a()),t.next=4,X("/".concat(i,"/sessions/").concat(r,"/positions"),at(e));case 4:s=t.sent,n(Ye(s));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),it=(L({name:"deletePosition",description:"Delete position",propTypes:{id:E.a.any.isRequired},onErrorDispatch:function(e){return T(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i,s;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a().model.sessions.activeSession.id,i=nn(a()),t.next=4,X("/".concat(i,"/sessions/").concat(r,"/positions/delete"),at(e));case 4:s=t.sent,n($e(s));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),Ce._localStoreSelector),st=Object(S.a)(it,(function(e){return e._modelData})),ot=Object(S.a)([st,Pe,Je,Oe],(function(e,t,n,a){var r=P(t),i=P(n),s=P(a);return e.map((function(e){var t=e.instructor_ids,n=e.contract_template_id,a=e.instructor_preferences,o=Object(ye.a)(e,["instructor_ids","contract_template_id","instructor_preferences"]);return Object(l.a)(Object(l.a)({},o),{},{instructors:t.map((function(e){return r[e]})),contract_template:i[n],instructor_preferences:(a||[]).map((function(e){var t=e.applicant_id,n=e.instructor_id,a=Object(ye.a)(e,["applicant_id","instructor_id"]);return Object(l.a)({instructor:r[n],applicant:s[t]},a)}))})}))})),ct=R("FETCH_APPLICATIONS_SUCCESS"),ut=R("FETCH_ONE_APPLICATION_SUCCESS"),lt=R("UPSERT_ONE_APPLICATION_SUCCESS"),dt=R("DELETE_ONE_APPLICATION_SUCCESS"),pt=H("applicant","applicant_id"),ft=H("position","position_id");function mt(e){var t=U(e,["position_preferences"]),n=Object(k.a)(t,2),a=n[0],r=n[1];return r.position_preferences&&(a.position_preferences=r.position_preferences.map((function(e){return ft(e)}))),pt(a)}var ht,_t=L({name:"fetchApplications",description:"Fetch applications",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(){return function(){var e=Object(g.a)(v.a.mark((function e(t,n){var a,r,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=nn(n()),r=n().model.sessions.activeSession.id,e.next=4,$("/".concat(a,"/sessions/").concat(r,"/applications"));case 4:i=e.sent,t(ct(i));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}}),vt=(L({name:"fetchApplication",description:"Fetch application",propTypes:{id:E.a.any.isRequired},onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i,s;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=nn(a()),i=a().model.sessions.activeSession.id,t.next=4,$("/".concat(r,"/sessions/").concat(i,"/applications/").concat(e.id));case 4:s=t.sent,n(ut(s));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),L({name:"upsertApplication",description:"Add/insert application",propTypes:{},onErrorDispatch:function(e){return C(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i,s;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=nn(a()),i=a().model.sessions.activeSession.id,t.next=4,X("/".concat(r,"/sessions/").concat(i,"/applications"),mt(e));case 4:s=t.sent,n(lt(s));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),L({name:"deleteApplication",description:"Delete application",propTypes:{id:E.a.any.isRequired},onErrorDispatch:function(e){return T(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i,s;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=nn(a()),i=a().model.sessions.activeSession.id,t.next=4,X("/".concat(r,"/sessions/").concat(i,"/applications/delete"),mt(e));case 4:s=t.sent,n(dt(s));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),we._localStoreSelector),gt=Object(S.a)(vt,(function(e){return e._modelData})),bt=(Object(S.a)([gt,Oe,ot],(function(e,t,n){if(0===e.length)return[];var a=P(t),r=P(n);return e.map((function(e){var t=e.position_preferences,n=e.applicant_id,i=Object(ye.a)(e,["position_preferences","applicant_id"]);return Object(l.a)(Object(l.a)({},i),{},{applicant:a[n]||{},position_preferences:(t||[]).map((function(e){var t=e.position_id,n=Object(ye.a)(e,["position_id"]);return Object(l.a)({position:r[t]},n)}))})}))})),ie("FETCH_ASSIGNMENTS_SUCCESS","FETCH_ONE_ASSIGNMENT_SUCCESS","UPSERT_ONE_ASSIGNMENT_SUCCESS","DELETE_ONE_ASSIGNMENT_SUCCESS"));function Et(e,t){var n=(t.payload[0]||{}).assignment_id;return n?Object(l.a)(Object(l.a)({},e),{},{_wageChunksByAssignmentId:Object(l.a)(Object(l.a)({},e._wageChunksByAssignmentId),{},Object(te.a)({},n,t.payload))}):e}var St=se({_modelData:[],_wageChunksByAssignmentId:{}},Object(l.a)(Object(l.a)({},bt),{},(ht={},Object(te.a)(ht,"FETCH_WAGE_CHUNKS_FOR_ASSIGNMENT_SUCCESS",Et),Object(te.a)(ht,"UPSERT_WAGE_CHUNKS_FOR_ASSIGNMENT_SUCCESS",Et),ht))),Ot=R("FETCH_ASSIGNMENTS_SUCCESS"),yt=R("FETCH_ONE_ASSIGNMENT_SUCCESS"),wt=R("UPSERT_ONE_ASSIGNMENT_SUCCESS"),jt=R("DELETE_ONE_ASSIGNMENT_SUCCESS"),Ct=L({name:"fetchAssignments",description:"Fetch assignments",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(){return function(){var e=Object(g.a)(v.a.mark((function e(t,n){var a,r,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=nn(n()),r=n().model.sessions.activeSession.id,e.next=4,$("/".concat(a,"/sessions/").concat(r,"/assignments"));case 4:i=e.sent,t(Ot(i));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}}),Tt=L({name:"fetchAssignment",description:"Fetch assignment",propTypes:{id:E.a.any.isRequired},onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=nn(a()),t.next=3,$("/".concat(r,"/assignments/").concat(e.id));case 3:i=t.sent,n(yt(i));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),At=H("applicant","applicant_id"),kt=H("position","position_id");function Nt(e){return kt(At(e))}var It=L({name:"upsertAssignment",description:"Add/insert assignment",propTypes:{},onErrorDispatch:function(e){return C(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=nn(a()),t.next=3,X("/".concat(r,"/assignments"),Nt(e));case 3:i=t.sent,n(wt(i));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),xt=(L({name:"deleteAssignment",description:"Delete assignment",propTypes:{id:E.a.any.isRequired},onErrorDispatch:function(e){return T(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=nn(a()),t.next=3,X("/".concat(r,"/assignments/delete"),Nt(e));case 3:i=t.sent,n(jt(i));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),St._localStoreSelector),Dt=Object(S.a)(xt,(function(e){return e._modelData})),Ft=Object(S.a)([Dt,Oe,ot],(function(e,t,n){return 0===e.length?[]:(t=P(t),n=P(n),e.map((function(e){var a=e.position_id,r=e.applicant_id,i=Object(ye.a)(e,["position_id","applicant_id"]);return Object(l.a)(Object(l.a)({},i),{},{position:n[a]||{},applicant:t[r]||{}})})))})),Pt=L({name:"setGlobals",description:"Sets global variables",onErrorDispatch:function(e){return A(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(l.a)(Object(l.a)({},Ht(a())),e),t.next=3,n(Rt(r));case 3:n({type:"SET_GLOBALS",payload:r});case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),Rt=L({name:"setGlobalsInUrl",description:"Stores global variables in the URL",onErrorDispatch:function(e){return A(e.toString())},dispatcher:function(e){return Object(g.a)(v.a.mark((function t(){var n,a,r,i,s,o,c;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=new URLSearchParams,a=0,r=Object.entries(e);a<r.length;a++)i=Object(k.a)(r[a],2),s=i[0],o=i[1],n.append(s,JSON.stringify(o));window.history.pushState&&(""+n).length>0&&((c=new URL(window.location)).search="?"+n,""+(c=""+c)!==""+window.location&&window.history.pushState({path:c},"",c));case 3:case"end":return t.stop()}}),t)})))}}),Ut=L({name:"setMockAPIState",description:"Activates or deactivates the mockAPI",onErrorDispatch:function(e){return A(e.toString())},dispatcher:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipInit:!1};return function(){var n=Object(g.a)(v.a.mark((function n(a){return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a(Pt({mockAPI:e}));case 2:if(t.skipInit){n.next=5;break}return n.next=5,a(Zt("toggleMockAPI"));case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}}),Ht=function(e){var t=e.ui.globals,n=(t.activeSession,Object(ye.a)(t,["activeSession"])),a=fn(e);return null!=a&&null!=a.id?Object(l.a)(Object(l.a)({},n),{},{activeSession:a.id}):n};function Lt(e){try{return JSON.parse(e)}catch(t){return e}}function Bt(e){var t,n=new URLSearchParams(e),a={},r=Object(N.a)(n.entries());try{for(r.s();!(t=r.n()).done;){var i=Object(k.a)(t.value,2),s=i[0],o=i[1];a[s]=Lt(o)}}catch(c){r.e(c)}finally{r.f()}return a}function qt(e){if(null!=e){var t=n(252).mockAPI;!0===e?t.replaceGlobalFetch():t.restoreGlobalFetch()}}function Mt(e){for(var t={},n=0,a=Object.entries(e);n<a.length;n++){var r=Object(k.a)(a[n],2),i=r[0],s=r[1];null!=s&&(t[i]=s)}return t}function Zt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{startAfterStage:!1},n=!!t.startAfterStage;return function(){var t=Object(g.a)(v.a.mark((function t(a,r){var i,s,o,c,u,l,d,p;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=function(t){var a=["pageLoad","toggleMockAPI","setActiveUser","setActiveUserRole","fetchSessions","setActiveSession","updateGlobals","fetchSessionDependentData"],s=a.indexOf(e)+n<=a.indexOf(t);if(s&&"setActiveSession"===t){var o=r(),c=pn(o),u=fn(o)||{id:i.activeSession};return!!c.find((function(e){return e.id===u.id}))}if(s&&"fetchSessionDependentData"===t){var l=r(),d=fn(l);return!(!d||null==d.id)}return s},i={mockAPI:null,activeSession:null},!s("pageLoad")){t.next=7;break}if(!window.location){t.next=7;break}return Object.assign(i,Bt(window.location.search)),t.next=7,a(Pt(Mt(i)));case 7:if(s("toggleMockAPI")&&qt(Ht(r()).mockAPI),!s("setActiveUser")){t.next=11;break}return t.next=11,a(Vt());case 11:if(!s("setActiveUserRole")){t.next=15;break}return o=nn(r()),t.next=15,a(Yt(o,{skipInit:!0}));case 15:if(!s("fetchSessions")){t.next=18;break}return t.next=18,a(cn());case 18:if(!s("setActiveSession")){t.next=25;break}return c=r(),u=pn(c),l=fn(c),d=u.find((function(e){return e.id===i.activeSession}))||l,t.next=25,a(ln(d,{skipInit:!0}));case 25:if(!s("updateGlobals")){t.next=28;break}return t.next=28,a(Pt(Mt(i)));case 28:if(!s("fetchSessionDependentData")){t.next=32;break}return p=[be,_t,Ct,Me,xe,Qe],t.next=32,Promise.all(p.map((function(e){return a(e())})));case 32:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}var Gt=R("FETCH_ACTIVE_USER_SUCCESS"),Wt=R("FETCH_USERS_SUCCESS"),Jt=R("UPSERT_USERS_SUCCESS"),Kt=R("SET_ACTIVE_USER_ROLE_SUCCESS"),Vt=L({name:"fetchActiveUser",description:"Fetch the active user",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(){return function(){var e=Object(g.a)(v.a.mark((function e(t,n){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=nn(n()),e.next=3,$("/".concat(a,"/active_user"));case 3:r=e.sent,t(Gt(r));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}}),zt=(L({name:"upsertUsers",description:"Upserts a user (setting their role(s))",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,X("/admin/users",e);case 2:return a=t.sent,n(Jt(a)),t.next=6,n(zt(e));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),L({name:"fetchUsers",description:"Fetch all users",propTypes:{},onErrorDispatch:function(e){return C(e.toString())},dispatcher:function(){return function(){var e=Object(g.a)(v.a.mark((function e(t,n){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=nn(n()),e.next=3,$("/".concat(a,"/users"));case 3:r=e.sent,t(Wt(r));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}})),Yt=L({name:"setActiveUserRole",description:"Sets the role of the active user",onErrorDispatch:function(e){return T(e.toString())},dispatcher:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){var n=Object(g.a)(v.a.mark((function n(a){return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a(Kt(e));case 2:if(t.skipInit){n.next=5;break}return n.next=5,a(Zt("setActiveUserRole",{startAfterStage:!0}));case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}}),$t=L({name:"debugOnlyFetchUsers",description:"Fetch all users; this is available only in debug mode and bypasses any user permissions",propTypes:{},onErrorDispatch:function(e){return C(e.toString())},dispatcher:function(){return function(){var e=Object(g.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$("/debug/users");case 2:n=e.sent,t(Wt(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),Qt=L({name:"debugOnlySetActiveUser",description:"Sets the active user (i.e. fakes the 'logged on' user); available only in debug mode",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){var n=Object(g.a)(v.a.mark((function n(a){var r;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,X("/debug/active_user",e);case 2:return r=n.sent,n.next=5,a(Gt(r));case 5:return n.next=7,a(Kt(r.roles[0]));case 7:if(t.skipInit){n.next=10;break}return n.next=10,a(Zt("setActiveUser"));case 10:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}}),Xt=de._localStoreSelector,en=function(e){return Xt(e).users},tn=function(e){return Xt(e).active_user},nn=function(e){return Xt(e).active_role},an=R("FETCH_SESSIONS_SUCCESS"),rn=R("FETCH_ONE_SESSION_SUCCESS"),sn=R("UPSERT_ONE_SESSION_SUCCESS"),on=(R("DELETE_ONE_SESSION_SUCCESS"),R("SET_ACTIVE_SESSION")),cn=L({name:"fetchSessions",description:"Fetch sessions",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(){return function(){var e=Object(g.a)(v.a.mark((function e(t,n){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=nn(n()),e.next=3,$("/".concat(a,"/sessions"));case 3:return r=e.sent,e.next=6,t(an(r));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}}),un=(L({name:"fetchSession",description:"Fetch session",propTypes:{id:E.a.any.isRequired},onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=nn(a()),t.next=3,$("/".concat(r,"/sessions/").concat(e.id));case 3:i=t.sent,n(rn(i));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),L({name:"upsertSession",description:"Add/insert session",propTypes:{},onErrorDispatch:function(e){return C(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=nn(a()),t.next=3,X("/".concat(r,"/sessions"),e);case 3:i=t.sent,n(sn(i));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}})),ln=L({name:"setActiveSession",description:"Set the active session",onErrorDispatch:!0,dispatcher:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){var n=Object(g.a)(v.a.mark((function n(a,r){var i,s,o;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.skipInit,s=r(),(o=fn(s))!==e){n.next=5;break}return n.abrupt("return");case 5:if(null!=e){n.next=9;break}return n.next=8,a(on(null));case 8:return n.abrupt("return");case 9:if((o||{id:null}).id!==e.id){n.next=11;break}return n.abrupt("return");case 11:return n.next=13,a(on(e));case 13:if(i){n.next=16;break}return n.next=16,a(Zt("setActiveSession",{startAfterStage:!0}));case 16:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}}),dn=le._localStoreSelector,pn=Object(S.a)(dn,(function(e){return e._modelData})),fn=Object(S.a)(dn,(function(e){return e.activeSession})),mn=R("FETCH_WAGE_CHUNKS_FOR_ASSIGNMENT_SUCCESS"),hn=R("UPSERT_WAGE_CHUNKS_FOR_ASSIGNMENT_SUCCESS"),_n=R("UPSERT_ONE_WAGE_CHUNK_SUCCESS"),vn=R("DELETE_ONE_WAGE_CHUNK_SUCCESS"),gn=L({name:"fetchWageChunksForAssignment",description:"Fetch wage chunks associated with an assignment",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i,s;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=nn(a()),i=e.id,t.next=4,$("/".concat(r,"/assignments/").concat(i,"/wage_chunks"));case 4:s=t.sent,n(mn(s));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),bn=L({name:"upsertWageChunksForAssignment",description:"Fetch wage chunks associated with an assignment",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e,t){return function(){var n=Object(g.a)(v.a.mark((function n(a,r){var i,s,o;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=nn(r()),s=e.id,n.next=4,X("/".concat(i,"/assignments/").concat(s,"/wage_chunks"),t);case 4:return o=n.sent,a(hn(o)),n.next=8,a(Tt(e));case 8:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}}),En=(L({name:"upsertWageChunk",description:"Add/insert wage chunk",propTypes:{},onErrorDispatch:function(e){return C(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=nn(a()),t.next=3,X("/".concat(r,"/wage_chunks"),e);case 3:i=t.sent,n(_n(i));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),L({name:"deleteWageChunk",description:"Delete a wage chunk",propTypes:{id:E.a.any.isRequired},onErrorDispatch:function(e){return T(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=nn(a()),t.next=3,X("/".concat(r,"/wage_chunks/delete"),e);case 3:i=t.sent,n(vn(i));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),St._localStoreSelector),Sn=Object(S.a)(En,(function(e){return function(t){var n=t.id;return e._wageChunksByAssignmentId[n]?e._wageChunksByAssignmentId[n]:[]}})),On=R("FETCH_ONE_OFFER_SUCCESS"),yn=R("SET_OFFER_ACCEPTED_SUCCESS"),wn=R("SET_OFFER_REJECTED_SUCCESS"),jn=R("OFFER_CREATE_SUCCESS"),Cn=R("OFFER_EMAIL_SUCCESS"),Tn=R("OFFER_NAG_SUCCESS"),An=R("OFFER_WITHDRAW_SUCCESS"),kn=(L({name:"fetchActiveOfferForAssignment",description:"Fetch an offer associated with an assignment",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=nn(a()),t.next=3,$("/".concat(r,"/assignments/").concat(e.id,"/active_offer"));case 3:i=t.sent,n(On(i));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),L({name:"setOfferForAssignmentAccepted",description:"Set an offer as accepted",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=nn(a()),t.next=3,X("/".concat(r,"/assignments/").concat(e.id,"/active_offer/accept"));case 3:return i=t.sent,n(yn(i)),t.next=7,n(Tt(e));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}})),Nn=L({name:"setOfferForAssignmentRejected",description:"Set an offer as rejected",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=nn(a()),t.next=3,X("/".concat(r,"/assignments/").concat(e.id,"/active_offer/reject"));case 3:return i=t.sent,n(wn(i)),t.next=7,n(Tt(e));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),In=L({name:"offerForAssignmentWithdraw",description:"Withdraw an offer",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=nn(a()),t.next=3,X("/".concat(r,"/assignments/").concat(e.id,"/active_offer/withdraw"));case 3:return i=t.sent,n(An(i)),t.next=7,n(Tt(e));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),xn=L({name:"offerForAssignmentCreate",description:"Create an offer",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=nn(a()),t.next=3,X("/".concat(r,"/assignments/").concat(e.id,"/active_offer/create"));case 3:return i=t.sent,n(jn(i)),t.next=7,n(Tt(e));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),Dn=L({name:"offerForAssignmentEmail",description:"Email an offer",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=nn(a()),t.next=3,X("/".concat(r,"/assignments/").concat(e.id,"/active_offer/email"));case 3:return i=t.sent,n(Cn(i)),t.next=7,n(Tt(e));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),Fn=L({name:"offerForAssignmentNag",description:"Send a nag email for an offer",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=nn(a()),t.next=3,X("/".concat(r,"/assignments/").concat(e.id,"/active_offer/nag"));case 3:return i=t.sent,n(Tn(i)),t.next=7,n(Tt(e));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),Pn=function(e){var t=e.globals,n=e.setMockAPIState,a=t.mockAPI;return r.a.createElement("span",{title:"The Mock API simulates the TAPP API but uses browser-based storage. This allows you to test TAPP functionality without a working server."},"Mock API"," ",r.a.createElement(m.a,null,r.a.createElement(h.a,{variant:a?"primary":"secondary",onClick:function(){return n(!0)}},"On"),r.a.createElement(h.a,{variant:a?"secondary":"primary",onClick:function(){return n(!1)}},"Off")))};Pn=Object(o.connect)((function(e){return{globals:Ht(e)}}),{setGlobals:Pt})(Pn);var Rn=n(393),Un=n.n(Rn),Hn=(n(845),n(4)),Ln=n(252),Bn=n(54),qn=function(){};function Mn(e){return r.a.createElement(p.a.Link,{as:c.b,activeClassName:"bg-warning text-dark",to:e.to},e.children)}var Zn={openapi:"3.0.0",info:{description:"TAPP is a program for TA management--for making TA assignments and distributing TA contracts.",title:"TAPP"},servers:[{url:"/api/v1/admin"},{url:"/api/v1/instructor"},{url:"/api/v1/ta"},{url:"/api/v1"}],paths:Object(l.a)({},Object(Hn.c)(Ln.mockAPI))},Gn=Object(o.connect)((function(e){return{activeUser:tn(e),users:en(e)}}),{fetchUsers:$t,setActiveUser:Qt})((function(e){var t=e.users,n=void 0===t?[]:t,a=e.activeUser,i=void 0===a?{}:a,s=e.setActiveUser,o=void 0===s?qn:s,c=e.fetchUsers,u=void 0===c?qn:c,l=r.a.useState(!1),d=Object(k.a)(l,2),p=d[0],f=d[1];return r.a.useEffect((function(){p&&u()}),[p,u]),r.a.createElement("span",{title:"Set which user you are currently logged in as. This is only available when the server is running in debug mode.",className:"logged-in-as-container"},r.a.createElement("label",null,"Logged in as"),r.a.createElement(Bn.a,{onSelect:function(e){o(n[e])},onToggle:function(e){return f(e)},show:p,alignRight:!0},r.a.createElement(Bn.a.Toggle,{split:!0,variant:"dark"},i.utorid," "),r.a.createElement(Bn.a.Menu,{flip:!0},(n||[]).map((function(e,t){return r.a.createElement(Bn.a.Item,{key:t,eventKey:t,active:i.utorid===e.utorid},e.utorid," (",(e.roles||[]).join(", "),")")})))))})),Wn=Object(o.connect)(null,{setMockAPIState:Ut})(Pn);var Jn=n(14),Kn=Object(o.connect)((function(e){return{notifications:e.ui.notifications}}))(y.a),Vn=function(e){return e.ui.offerTable},zn=n(926),Yn=n(396);function $n(e,t){function n(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};return function(r){var i=r.target.value||"",s=Object(l.a)(Object(l.a)({},e),{},Object(te.a)({},n,a(i)));t(s)}}return function(t,a){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=function(e){return e},c=function(e){return e||""};switch(i){case"number":o=Number;break;case"date":o=function(e){return new Date(e).toISOString()},c=function(e){try{return new Date(e).toISOString().slice(0,10)}catch(t){return""}}}return r.a.createElement(r.a.Fragment,null,r.a.createElement(zn.a.Label,null,t),r.a.createElement(zn.a.Control,Object.assign({type:i,value:c(e[a]),onChange:n(a,o)},s)))}}function Qn(e){var t=e.children;return r.a.createElement(zn.a.Row,{style:{alignItems:"baseline"}},r.a.Children.map(t,(function(e,t){return r.a.createElement(zn.a.Group,{as:Yn.a,key:t},e)})))}function Xn(e){var t=$n(e.session,e.setSession);return r.a.createElement(zn.a,null,r.a.createElement(Qn,null,t("Session Name (e.g. 2019 Fall)","name"),t("Start Date","start_date","date"),t("End Date","end_date","date")),r.a.createElement(Qn,null,t("Rate 1 (pre-January rate)","rate1","number",{step:"0.01",min:0}),t("Rate 2 (post-January rate)","rate2","number",{step:"0.01",min:0})))}var ea=function(e){Object(M.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(B.a)(this,n),t.apply(this,arguments)}return Object(Jn.a)(n,[{key:"render",value:function(){var e=this.props.applicants,t=r.a.createElement("div",null,"No Applicants...");return e.length>0&&(t=r.a.createElement("ul",null,e.map((function(e){return r.a.createElement("li",{key:e.id},e.first_name," ",e.last_name)})))),r.a.createElement("div",null,r.a.createElement("h3",null,"Available Applicants"),t)}}]),n}(r.a.Component),ta=n(52),na=[{Header:"Template Name",accessor:"template_name"},{Header:"Template File",accessor:"template_file"}];function aa(e){var t=e.contractTemplates,n=e.columns,a=void 0===n?na:n;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Contract Templates"),r.a.createElement(ta.a,{data:t,columns:a,showPagination:!1,minRows:1}))}var ra=[{Header:"Last Name",accessor:"last_name"},{Header:"First Name",accessor:"first_name"},{Header:"UTORid",accessor:"utorid"}];function ia(e){var t=e.instructors,n=e.columns,a=void 0===n?ra:n;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Instructors"),r.a.createElement(ta.a,{data:t,columns:a,showPagination:!1,minRows:1}))}var sa={utorid:"",last_name:"",first_name:""};function oa(e){var t=e.instructor,n=e.setInstructor,a=Object(l.a)(Object(l.a)({},sa),t);function i(e){return function(t){var r=t.target.value||"",i=Object(l.a)(Object(l.a)({},a),{},Object(te.a)({},e,r));n(i)}}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text";return r.a.createElement(r.a.Fragment,null,r.a.createElement(zn.a.Label,null,e),r.a.createElement(zn.a.Control,{type:n,value:a[t]||"",onChange:i(t)}))}return r.a.createElement(zn.a,null,r.a.createElement(zn.a.Row,null,r.a.createElement(zn.a.Group,{as:Yn.a},s("First Name","first_name")),r.a.createElement(zn.a.Group,{as:Yn.a},s("Last Name","last_name")),r.a.createElement(zn.a.Group,{as:Yn.a},s("UTORid","utorid"))))}var ca=n(405),ua=n(925);n(847);function la(e){var t=e.title,n=e.value,a=e.show,i=e.onHide,s=e.onChange,o=r.a.useState(n),c=Object(k.a)(o,2),u=c[0],l=c[1];function d(){l(n),i()}var p=u==n?null:r.a.createElement("span",null,"Change from"," ",r.a.createElement("span",{className:"field-dialog-formatted-name"},n)," to"," ",r.a.createElement("span",{className:"field-dialog-formatted-name"},u));return r.a.createElement(ua.a,{show:a,onHide:d},r.a.createElement(ua.a.Header,{closeButton:!0},r.a.createElement(ua.a.Title,null,t)),r.a.createElement(ua.a.Body,null,r.a.createElement("input",{type:"text",value:u,onChange:function(e){return l(e.currentTarget.value)}})," ",p),r.a.createElement(ua.a.Footer,null,r.a.createElement(h.a,{onClick:d,variant:"outline-secondary"},"Cancel"),r.a.createElement(h.a,{onClick:function(){u!=n&&s(u,n),i()}},"Save")))}function da(e){var t=e.title,n=e.hidden,a=e.onClick;return n?null:r.a.createElement("div",{className:"show-on-hover edit-glyph",onClick:a,title:t},r.a.createElement(ca.a,null))}function pa(e){var t=e.children,n=e.title,a=e.value,i=e.onChange,s=e.editable,o=void 0===s||s,c=r.a.useState(!1),u=Object(k.a)(c,2),l=u[0],d=u[1];return r.a.createElement("div",{className:"show-on-hover-wrapper"},t,r.a.createElement(da,{title:n,hidden:!o,onClick:function(){return d(!0)}}),r.a.createElement(la,{title:n,value:a,onChange:i,show:l,onHide:function(){return d(!1)}}))}function fa(e){var t="Edit ".concat(e.column.Header),n=e.upsertInstructor,a=e.field;return r.a.createElement(pa,{title:t,value:e.value||"",onChange:function(t){var r=e.original.id;n(Object(te.a)({id:r},a,t))}},e.value)}var ma=Object(o.connect)((function(e){return{instructors:Pe(e)}}),{upsertInstructor:De})((function(e){var t=e.upsertInstructor,n=Object(ye.a)(e,["upsertInstructor"]);function a(e){return function(n){return r.a.createElement(fa,Object.assign({field:e,upsertInstructor:t},n))}}var i=[{Header:"Last Name",accessor:"last_name",Cell:a("last_name")},{Header:"First Name",accessor:"first_name",Cell:a("first_name")},{Header:"Email",accessor:"email",Cell:a("email")},{Header:"UTORid",accessor:"utorid",Cell:a("utorid")}];return r.a.createElement(ia,Object.assign({columns:i},n))})),ha=n(921);function _a(e){return null==e?"":(""+e).trim()}var va={first_name:"",last_name:"",utorid:""};var ga=Object(o.connect)((function(e){return{instructors:Pe(e)}}),{upsertInstructor:De})((function(e){var t=e.show,n=e.onHide,a=void 0===n?function(){}:n,i=e.instructors,s=e.upsertInstructor,o=r.a.useState(va),c=Object(k.a)(o,2),u=c[0],l=c[1];r.a.useEffect((function(){t||l(va)}),[t]);var d=function(e,t){var n={delayShow:"",immediateShow:""};_a(e.utorid)&&_a(e.first_name)&&_a(e.last_name)||(n.delayShow="A first name, last name, and utorid is required");var a=t.find((function(t){return _a(t.utorid)===_a(e.utorid)}));return a&&(n.immediateShow=r.a.createElement("p",null,"Another instructor exists with utorid=",e.utorid,":"," ",r.a.createElement("b",null,a.first_name," ",a.last_name))),n}(u,i);return r.a.createElement(ua.a,{show:t,onHide:a},r.a.createElement(ua.a.Header,{closeButton:!0},r.a.createElement(ua.a.Title,null,"Add Instructor")),r.a.createElement(ua.a.Body,null,r.a.createElement(oa,{instructor:u,setInstructor:l}),d.immediateShow?r.a.createElement(ha.a,{variant:"danger"},d.immediateShow):null),r.a.createElement(ua.a.Footer,null,r.a.createElement(h.a,{onClick:a,variant:"light"},"Cancel"),r.a.createElement(h.a,{onClick:function(){s(u),a()},title:d.delayShow||"Create Instructor",disabled:!!d.delayShow||!!d.immediateShow},"Create Instructor")))}));function ba(){var e=r.a.useState(!1),t=Object(k.a)(e,2),n=t[0],a=t[1];return r.a.createElement("div",null,r.a.createElement(h.a,{onClick:function(){a(!0)}},"Add Instructor"),r.a.createElement(ga,{show:n,onHide:function(){a(!1)}}),r.a.createElement(ma,null))}var Ea=n(922),Sa=[{Header:"Position Code",accessor:"position_code"},{Header:"Position Title",accessor:"position_title"},{Header:"Hours",accessor:"hours_per_assignment"},{Header:"Start",accessor:"start_date"},{Header:"End",accessor:"end_date"},{Header:"Instructors",accessor:"instructors",Cell:function(e){return r.a.createElement(r.a.Fragment,null,e.value.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="".concat(e.first_name," ").concat(e.last_name);return r.a.createElement(Ea.a,{variant:"secondary",className:"mr-1",key:t},t)})))}},{Header:"Contract Template",accessor:"contract_template.template_name"}];function Oa(e){var t=e.positions,n=e.columns,a=void 0===n?Sa:n;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Positions"),r.a.createElement(ta.a,{data:t,columns:a,showPagination:!1,minRows:1}))}n(848);var ya=function(e){Object(M.a)(n,e);var t=Object(Z.a)(n);function n(e){var a;return Object(B.a)(this,n),(a=t.call(this,e)).state={filters:"",data:a.props.data},a}return Object(Jn.a)(n,[{key:"filter",value:function(e){var t=e.target.value,n=this.props.data.filter((function(e){for(var n in e){var a=e[n]&&e[n].toString().toLowerCase();if(a&&-1!==a.indexOf(t.toLowerCase()))return!0}return!1}));this.setState({filters:t,data:n})}},{key:"componentWillReceiveProps",value:function(e){e.data!==this.props.data&&this.setState({data:e.data})}},{key:"render",value:function(){var e=this.state.data,t=r.a.createElement("div",null,"No Applicants...");return e.length>0&&(t=r.a.createElement("ul",null,e.map((function(e){return r.a.createElement("li",{key:e.id},e.first_name," ",e.last_name)})))),r.a.createElement("div",{className:"search-box"},r.a.createElement("input",{className:"search",type:"text",name:"",value:this.state.filters,placeholder:"Search here",onChange:this.filter.bind(this)}),t)}}]),n}(r.a.Component),wa=n(923);var ja=function(e,t){return{success:e,content:t}},Ca=function(e,t){switch(Ta(e)){case".json":return function(e){try{t(ja(!0,JSON.parse(e)))}catch(n){t(ja(!1,n))}};default:return function(e){t(ja(!0,e))}}},Ta=function(e){var t=e.match(/\.\w+$/g);return t.length>0?t[0]:null};function Aa(e){var t=e.uploadFunc,n=Object(a.useState)(null),i=Object(k.a)(n,2),s=i[0],o=(i[1],Object(a.useState)("")),c=Object(k.a)(o,2),u=c[0],l=(c[1],Object(a.useState)(!1)),d=Object(k.a)(l,2),p=d[0],f=d[1];function m(){f(!1)}return r.a.createElement("div",null,r.a.createElement(wa.a,{id:"dropdown-basic-button",title:"Import"},r.a.createElement("input",{id:"raised-button-file",type:"file",accept:"application/json",style:{display:"none"},onChange:function(e){!function(e,t){var n=e.files;if(n.length>0){var a=new FileReader,r=Ca(n[0].name,t);a.readAsText(n[0]),a.onload=function(e){return r(e.target.result)}}e.value=""}(e.target,(function(e){throw console.log(e),new Error("Not implemented!")}))}}),r.a.createElement("label",{htmlFor:"raised-button-file"},r.a.createElement(Bn.a.Item,null,"Import From File"))),r.a.createElement(ua.a,{show:p,onHide:m},r.a.createElement(ua.a.Header,{closeButton:!0},r.a.createElement(ua.a.Title,null,"The following will be overwritten")),r.a.createElement(ua.a.Body,null,r.a.createElement("p",null,u)),r.a.createElement(ua.a.Footer,null,r.a.createElement(h.a,{variant:"secondary",onClick:m},"Cancel"),r.a.createElement(h.a,{variant:"primary",onClick:function(){return t(s)}},"Proceed"))))}var ka=n(27),Na=n(398),Ia=n.n(Na),xa=(n(849),Ia()(ta.a)),Da=[{Header:"Last Name",accessor:"applicant.last_name"},{Header:"First Name",accessor:"applicant.first_name"},{Header:"Email",accessor:"applicant.email",width:250},{Header:"Student Number",accessor:"applicant.student_number",width:100},{Header:"Position",accessor:"position.position_code",width:130},{Header:"Hours",accessor:"hours",width:100},{Header:"Contract",accessor:"position.contract_template.template_name",width:100},{Header:"First Time?",accessor:"applicant.first_time_ta",Cell:function(e){return r.a.createElement("div",{style:{backgroundColor:"red"}},(""+e.value).toUpperCase())},width:100},{Header:"Status",accessor:"status",width:100},{Header:"Nag Count",accessor:"nag_count",width:100}];function Fa(e){var t=e.data,n=e.selected,a=e.setSelected,i=e.columns,s=void 0===i?Da:i,o=new Set(n),c=function(e){a(Object(ka.a)(e))},u=r.a.useState(""),l=Object(k.a)(u,2),d=l[0],p=l[1],f=r.a.useState(null),m=Object(k.a)(f,2),h=m[0],_=m[1],v=r.a.useState(!1),g=Object(k.a)(v,2),b=g[0],E=g[1];var S=d?t.filter((function(e){return function(e){return Object.values(e).map((function(e){return"string"===typeof e?e:Object.values(e).join(" ")})).join(" ").toLowerCase()}(e).includes(d.toLowerCase())})):t,O=r.a.useRef(null);function y(){if(!O)return console.warn("Trying to get data displayed in a ReactTable, but no ref has been created"),[];try{return O.getWrappedInstance().getResolvedState().sortedData.map((function(e){return e._original}))}catch(e){return[]}}r.a.useEffect((function(){var e=!1,t=y();t.length>0&&t.every((function(e){return o.has(e.id)}))&&(e=!0),E(e)}),[o,d]);var w=r.a.createElement(xa,{ref:function(e){return O=e},data:S,columns:s,toggleSelection:function e(t,n,a){if(n){if(n&&null==h)return e(t,!1,a);var r=y().map((function(e){return e.id})),i=r.indexOf(h);if(-1===i)return e(t,!1,a);var s=r.indexOf(a.id),u=[Math.min(i,s),Math.max(i,s)],l=u[0],d=u[1];c(new Set([].concat(Object(ka.a)(o),Object(ka.a)(r.filter((function(e,t){return t<=d&&t>=l}))))))}else{var p=!o.has(a.id),f=new Set(o);!0===p?(f.add(a.id),c(f),_(a.id)):(f.delete(a.id),c(f),_(null))}},selectAll:b,toggleAll:function(){var e=y().map((function(e){return e.id}));if(b){var t,n=new Set(o),a=Object(N.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;n.delete(r)}}catch(i){a.e(i)}finally{a.f()}c(n)}else c(new Set([].concat(Object(ka.a)(o),Object(ka.a)(e))))},isSelected:function(e){return o.has(e)},selectType:"checkbox",keyField:"id",minRows:1,showPagination:!1});return null==n&&(w=r.a.createElement(ta.a,{columns:s,data:S})),r.a.createElement("div",null,"Filter:"," ",r.a.createElement("input",{type:"text",onChange:function(e){return p(e.target.value)}}),w)}function Pa(e){var t="Edit ".concat(e.column.Header),n=e.upsertApplicant,a=e.field;return r.a.createElement(pa,{title:t,value:e.value||"",onChange:function(t){var r=e.original.applicant.id;n(Object(te.a)({id:r},a,t))}},e.value)}function Ra(e){var t="Edit ".concat(e.column.Header),n=e.upsertAssignment,a=e.field,i=e.original.active_offer_status;return r.a.createElement(pa,{title:t,value:e.value||"",onChange:function(t){var r=e.original.id;n(Object(te.a)({id:r},a,t))},editable:!i},e.value)}var Ua=Object(o.connect)((function(e){return{data:Ft(e),selected:Vn(e).selectedAssignmentIds}}),{upsertApplicant:Ee,upsertAssignment:It,setSelected:function(e){return{type:"SET_SELECTED_ROWS",payload:e}}})((function(e){var t=e.upsertApplicant,n=e.upsertAssignment,a=Object(ye.a)(e,["upsertApplicant","upsertAssignment"]);function i(e){return function(n){return r.a.createElement(Pa,Object.assign({field:e,upsertApplicant:t},n))}}var s,o=[{Header:"Last Name",accessor:"applicant.last_name",Cell:i("last_name")},{Header:"First Name",accessor:"applicant.first_name",Cell:i("first_name")},{Header:"Email",accessor:"applicant.email",Cell:i("email")},{Header:"Position",accessor:"position.position_code"},{Header:"Hours",accessor:"hours",Cell:(s="hours",function(e){return r.a.createElement(Ra,Object.assign({field:s,upsertAssignment:n},e))})},{Header:"Status",id:"status",accessor:function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.charAt(0).toUpperCase()+e.slice(1)}(e.active_offer_status||"")}}];return r.a.createElement(Fa,Object.assign({columns:o},a))})),Ha=n(75),La=(n(250),n(251),{position_code:"",position_title:"",hours_per_assignment:0,contract_template:{},duties:"Some combination of marking, invigilating, tutorials, office hours, and the help centre.",instructors:[]});function Ba(e){var t=e.position,n=e.setPosition,a=e.instructors,i=void 0===a?[]:a,s=e.contractTemplates,o=void 0===s?[]:s,c=e.defaultContractTemplate,u=void 0===c?{}:c,d=Object(l.a)(Object(l.a)({},La),t);var p=$n(d,n);return r.a.createElement(zn.a,null,r.a.createElement(Qn,null,p("Course Code (e.g. MAT135H1F)","position_code"),p("Course Title","position_title")),r.a.createElement(Qn,null,p("Start Date","start_date","date"),p("End Date","end_date","date"),p("Hours per Assignment","hours_per_assignment","number")),r.a.createElement(zn.a.Group,null,r.a.createElement(zn.a.Label,null,"Instructors"),r.a.createElement(Ha.Typeahead,{id:"instructors-input",ignoreDiacritics:!0,multiple:!0,placeholder:"Instructors...",labelKey:function(e){return"".concat(e.first_name," ").concat(e.last_name)},selected:d.instructors,options:i,onChange:function(e){n(Object(l.a)(Object(l.a)({},d),{},{instructors:e}))}})),r.a.createElement(zn.a.Group,null,r.a.createElement(zn.a.Label,null,"Contract Template (which offer template will be used)"),r.a.createElement(Ha.Typeahead,{id:"instructors-input",ignoreDiacritics:!0,multiple:!0,placeholder:"Contract template...",labelKey:function(e){return"".concat(e.template_name)},selected:[d.contract_template],options:o,onChange:function(e){var t=e[e.length-1]||u;n(Object(l.a)(Object(l.a)({},d),{},{contract_template:t}))}})),r.a.createElement("h3",null,"Ad-related Info"),r.a.createElement(Qn,null,p("Duties","duties")),r.a.createElement(Qn,null,p("Qualifications","qualifications")),r.a.createElement("h3",null,"Admin Info"),r.a.createElement(Qn,null,p("Current Enrollment","current_enrollment","number"),p("Waitlisted","current_waitlisted","number"),p("Desired Number of Assignments","desired_num_assignments","number")))}var qa={note:"",position:{id:null},position_id:null,applicant:{id:null},applicant_id:null};function Ma(e){var t=e.assignment,n=e.setAssignment,a=e.applicants,i=e.positions,s=Object(l.a)(Object(l.a)({},qa),t);var o=$n(s,n);return r.a.createElement(zn.a,null,r.a.createElement(Qn,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(zn.a.Label,null,"Position"),r.a.createElement(Ha.Typeahead,{id:"position-input",ignoreDiacritics:!0,placeholder:"Position...",multiple:!0,labelKey:function(e){return"".concat(e.position_code," (").concat(e.position_title,")")},selected:null==s.position.id?[]:[s.position],options:i,onChange:function(e){var t=e[e.length-1]||{id:null};n(Object(l.a)(Object(l.a)({},s),{},{position:t,position_id:t.id,hours:t.hours_per_assignment,start_date:t.start_date,end_date:t.end_date}))}})),r.a.createElement(r.a.Fragment,null,r.a.createElement(zn.a.Label,null,"Applicant"),r.a.createElement(Ha.Typeahead,{id:"applicant-input",ignoreDiacritics:!0,placeholder:"Applicant...",multiple:!0,labelKey:function(e){return"".concat(e.first_name," ").concat(e.last_name)},selected:null==s.applicant.id?[]:[s.applicant],options:a,onChange:function(e){var t=e[e.length-1]||{id:null};n(Object(l.a)(Object(l.a)({},s),{},{applicant:t,applicant_id:t.id}))}}))),r.a.createElement(Qn,null,o("Hours","hours","number")),r.a.createElement("h4",null,"Optional Settings"),r.a.createElement(Qn,null,o("Start Date","start_date","date"),o("End Date","end_date","date")))}var Za={template_name:"",template_file:""};function Ga(e){var t=e.contractTemplate,n=e.setContractTemplate,a=e.availableTemplates,i=void 0===a?[]:a,s=Object(l.a)(Object(l.a)({},Za),t);var o=$n(s,n);return r.a.createElement(zn.a,null,r.a.createElement(Qn,null,o('Template Name (e.g. "OTO" "Invigilate")',"template_name")),r.a.createElement(Qn,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(zn.a.Label,{title:"This file is stored on the server; you can edit it there."},"Template File"),r.a.createElement(Ha.Typeahead,{id:"file-name-input",ignoreDiacritics:!0,placeholder:"File name...",multiple:!0,labelKey:function(e){return"".concat(e)},selected:s.template_file?[s.template_file]:[],options:i.map((function(e){return e.template_file})),onChange:function(e){var t=e[e.length-1]||"";n(Object(l.a)(Object(l.a)({},s),{},{template_file:t}))}}))))}var Wa=Object(o.connect)((function(e){return{applicants:Oe(e)}}))(ea),Ja=Object(o.connect)((function(e){return{contractTemplates:Je(e)}}))(aa),Ka=Object(o.connect)((function(e){return{positions:ot(e)}}))(Oa),Va=Object(o.connect)((function(e){return{assignments:Ft(e)}}))((function(e){var t=e.assignments,n=r.a.createElement("div",null,"No assignments...");return t.length>0&&(n=r.a.createElement("ul",null,t.map((function(e){return r.a.createElement("li",{key:e.id},e.position.position_code," (",e.hours," ","hours): ",e.applicant.first_name," ",e.applicant.last_name)})))),r.a.createElement("div",null,r.a.createElement("h3",null,"Available Assignments"),n)})),za=Object(o.connect)((function(e){return{data:Oe(e)}}))(ya),Ya=Object(o.connect)((function(e){return{data:Vn(e).selectedAssignmentIds}}))((function(e){var t=e.data;return r.a.createElement(wa.a,{id:"dropdown-basic-button",title:"Email"},r.a.createElement(Bn.a.Item,{onClick:function(){return function(){throw console.log("data read from redux: "+t),new Error("Email function not implemented!")}()}},"Email Blank"),r.a.createElement(Bn.a.Item,{onClick:function(){return function(){throw new Error("Email contract not implemented!")}()}},"Email Contract"),r.a.createElement(Bn.a.Item,{onClick:function(){return function(){throw new Error("Nag offer function not implemented!")}()}},"Nag Offers"))})),$a=Object(o.connect)((function(e){return{instructors:Pe(e)}}))(Ba),Qa=Object(o.connect)((function(e){return{positions:ot(e),applicants:Oe(e)}}))(Ma);function Xa(e){var t=e.children,n=e.title;return r.a.createElement("div",{style:{margin:5}},r.a.createElement("h5",null,"The"," ",r.a.createElement("span",{style:{color:"green",fontFamily:"mono"}},n)," ","Component"),r.a.createElement("div",{style:{border:"1px solid black",padding:5}},t))}var er=function(){var e=r.a.useState({position_id:0,applicant_id:0}),t=Object(k.a)(e,2),n=t[0],a=t[1],i=r.a.useState({position_code:""}),s=Object(k.a)(i,2),o=s[0],c=s[1],u=r.a.useState({last_name:"Baggins",first_name:"Bilbo",utorid:"bilbob"}),l=Object(k.a)(u,2),d=l[0],p=l[1],f=r.a.useState({name:""}),m=Object(k.a)(f,2),h=m[0],_=m[1],v=r.a.useState({}),g=Object(k.a)(v,2),b=g[0],E=g[1];return r.a.createElement("div",null,r.a.createElement(Xa,{title:"ContractTemplateEditor"},r.a.createElement(Ga,{contractTemplate:b,setContractTemplate:E,availableTemplates:[{template_file:"/math/OTO.html"},{template_file:"/cs/invigilate.html"}]})),r.a.createElement(Xa,{title:"AssignmentEditor"},r.a.createElement(Qa,{assignment:n,setAssignment:a})),r.a.createElement(Xa,{title:"SessionEditor"},r.a.createElement(Xn,{session:h,setSession:_})),r.a.createElement(Xa,{title:"InstructorEditor"},r.a.createElement(oa,{instructor:d,setInstructor:p})),r.a.createElement(Xa,{title:"PositionEditor"},r.a.createElement($a,{position:o,setPosition:c})),r.a.createElement(Xa,{title:"EditableField"},r.a.createElement(pa,{title:"Edit this super awesome content",value:45,onChange:console.log},"Edit me!")),r.a.createElement(Xa,{title:"ApplicantsList"},r.a.createElement(Wa,null)),r.a.createElement(Xa,{title:"PostitionTemplatesList"},r.a.createElement(Ja,null)),r.a.createElement(Xa,{title:"InstuctorsList"},r.a.createElement(ma,null)),r.a.createElement(Xa,{title:"PositionsList"},r.a.createElement(Ka,null)),r.a.createElement(Xa,{title:"AssignmentsList"},r.a.createElement(Va,null)),r.a.createElement(Xa,{title:"SearchBox"},r.a.createElement(za,null)),r.a.createElement(Xa,{title:"ImportButton"},r.a.createElement(Aa,null)),r.a.createElement(Xa,{title:"EmailButton"},r.a.createElement(Ya,null)),r.a.createElement(Xa,{title:"OfferTable"},r.a.createElement(Ua,null)))};var tr=Object(o.connect)((function(e,t){return{positions:ot(e),listRenderer:t.listRenderer}}))((function(e){var t=e.data,n=e.listRenderer,i=e.filterFunc,s=Object(ye.a)(e,["data","listRenderer","filterFunc"]),o=n,c=Object(a.useState)(""),u=Object(k.a)(c,2),l=u[0],d=u[1],p=i(t,l);return r.a.createElement("div",null,r.a.createElement("input",{type:"text",value:l,onChange:function(e){return d(e.target.value)}}),r.a.createElement(o,Object.assign({data:p},s)))}));var nr=function(){return r.a.createElement("div",null,r.a.createElement(tr,{listRenderer:Oa,filterFunc:function(e,t){return e}}))};var ar={name:"",start_date:"",end_date:"",rate1:"",rate2:""};var rr=Object(o.connect)((function(e){return{sessions:pn(e)}}),{upsertSession:un})((function(e){var t=e.show,n=e.onHide,a=void 0===n?function(){}:n,i=e.sessions,s=e.upsertSession,o=r.a.useState(ar),c=Object(k.a)(o,2),u=c[0],l=c[1];r.a.useEffect((function(){t||l(ar)}),[t]);var d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={delayShow:"",immediateShow:""};_a(e.name)&&_a(e.start_date)&&_a(e.end_date)||(n.delayShow="A first name, start date, and end date is required");var a=t.find((function(t){return _a(t.name)===_a(e.name)}));return a&&(n.immediateShow=r.a.createElement("p",null,"Another session exists with name=",e.name)),n}(u,i);return r.a.createElement(ua.a,{show:t,onHide:a},r.a.createElement(ua.a.Header,{closeButton:!0},r.a.createElement(ua.a.Title,null,"Add Session")),r.a.createElement(ua.a.Body,null,r.a.createElement(Xn,{session:u,setSession:l}),d.immediateShow?r.a.createElement(ha.a,{variant:"danger"},d.immediateShow):null),r.a.createElement(ua.a.Footer,null,r.a.createElement(h.a,{onClick:a,variant:"light"},"Cancel"),r.a.createElement(h.a,{onClick:function(){s(u),a()},title:d.delayShow||"Create Session",disabled:!!d.delayShow||!!d.immediateShow},"Create Session")))})),ir=[{Header:"Name",accessor:"name"},{Header:"Start",accessor:"start_date"},{Header:"End",accessor:"end_date"},{Header:"Rate (Pre-January)",accessor:"rate1"},{Header:"Rate (Post-January)",accessor:"rate2"}];var sr=Object(o.connect)((function(e){return{sessions:pn(e)}}))((function(e){var t=e.sessions,n=e.columns,a=void 0===n?ir:n;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Sessions"),r.a.createElement(ta.a,{data:t,columns:a,showPagination:!1,minRows:1}))}));function or(){var e=r.a.useState(!1),t=Object(k.a)(e,2),n=t[0],a=t[1];return r.a.createElement("div",null,r.a.createElement(h.a,{onClick:function(){a(!0)}},"Add Session"),r.a.createElement(rr,{show:n,onHide:function(){a(!1)}}),r.a.createElement(sr,null))}var cr={position_code:"",position_title:"",hours_per_assignment:0,contract_template_id:null,duties:"Some combination of marking, invigilating, tutorials, office hours, and the help centre.",instructors:[]};var ur=Object(o.connect)((function(e){return{positions:ot(e),instructors:Pe(e),contractTemplates:Je(e)}}),{upsertPosition:rt})((function(e){var t=e.show,n=e.onHide,a=void 0===n?function(){}:n,i=e.positions,s=e.upsertPosition,o=e.instructors,c=e.contractTemplates,u=r.a.useState(cr),l=Object(k.a)(u,2),d=l[0],p=l[1];r.a.useEffect((function(){t||p(cr)}),[t]),r.a.useEffect((function(){var e=c.find((function(e){return"standard"===e.template_name.toLowerCase()}))||c.find((function(e){return"default"===e.template_name.toLowerCase()}))||c.find((function(e){return e.template_name.toLowerCase().includes("standard")}))||c.find((function(e){return e.template_name.toLowerCase().includes("default")}))||c[0];e&&(cr.contract_template=e,cr.contract_template_id=e.id)}),[c]);var f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={delayShow:"",immediateShow:""};_a(e.position_code)&&_a(e.start_date)&&_a(e.end_date)||(n.delayShow="A position code, start date, and end date is required");var a=t.find((function(t){return _a(t.position_code)===_a(e.position_code)}));return a&&(n.immediateShow=r.a.createElement("p",null,"Another position exists with name=",e.position_code)),n}(d,i);return r.a.createElement(ua.a,{show:t,onHide:a},r.a.createElement(ua.a.Header,{closeButton:!0},r.a.createElement(ua.a.Title,null,"Add Position")),r.a.createElement(ua.a.Body,null,r.a.createElement(Ba,{position:d,setPosition:p,instructors:o,contractTemplates:c,defaultContractTemplate:cr.contract_template}),f.immediateShow?r.a.createElement(ha.a,{variant:"danger"},f.immediateShow):null),r.a.createElement(ua.a.Footer,null,r.a.createElement(h.a,{onClick:a,variant:"light"},"Cancel"),r.a.createElement(h.a,{onClick:function(){s(d),a()},title:f.delayShow||"Create Position",disabled:!!f.delayShow||!!f.immediateShow},"Create Position")))})),lr=Object(o.connect)((function(e){return{positions:ot(e)}}))(Oa);function dr(){var e=r.a.useState(!1),t=Object(k.a)(e,2),n=t[0],a=t[1];return r.a.createElement("div",null,r.a.createElement(h.a,{onClick:function(){a(!0)}},"Add Position"),r.a.createElement(ur,{show:n,onHide:function(){a(!1)}}),r.a.createElement(lr,null))}var pr={position:{id:null},applicant:{id:null},position_id:-1,applicant_id:-1};var fr=Object(o.connect)((function(e){return{positions:ot(e),applicants:Oe(e),assignments:Ft(e)}}),{upsertAssignment:It})((function(e){var t=e.show,n=e.onHide,a=e.positions,i=e.applicants,s=e.assignments,o=e.upsertAssignment,c=r.a.useState(pr),u=Object(k.a)(c,2),l=u[0],d=u[1];r.a.useEffect((function(){t||d(pr)}),[t]);var p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={delayShow:"",immediateShow:""};_a(e.position_id)&&_a(e.applicant_id)||(n.delayShow="A position and applicant is required");var a=t.find((function(t){return _a((t.position||{}).id)===_a((e.position||{}).id)&&_a((t.applicant||{}).id)===_a((e.applicant||{}).id)}));return a&&(n.immediateShow=r.a.createElement("p",null,"Another assignment exists with"," ",r.a.createElement("b",null,"applicant=",e.applicant.first_name," ",e.applicant.last_name)," ","and ",r.a.createElement("b",null,"position=",e.position.position_code))),n}(l,s);return r.a.createElement(ua.a,{show:t,onHide:n},r.a.createElement(ua.a.Header,{closeButton:!0},r.a.createElement(ua.a.Title,null,"Add Assignment")),r.a.createElement(ua.a.Body,null,r.a.createElement(Ma,{positions:a,applicants:i,assignment:l,setAssignment:d}),p.immediateShow?r.a.createElement(ha.a,{variant:"danger"},p.immediateShow):null),r.a.createElement(ua.a.Footer,null,r.a.createElement(h.a,{onClick:n,variant:"light"},"Cancel"),r.a.createElement(h.a,{onClick:function(){o(l),n()},title:p.delayShow||"Create Position",disabled:!!p.delayShow||!!p.immediateShow},"Create Assignment")))}));var mr=Object(o.connect)((function(e){return{wageChunksByAssignment:Sn(e)}}),{fetchWageChunksForAssignment:gn,upsertWageChunksForAssignment:bn})((function(e){var t=e.assignment,n=e.wageChunksByAssignment,a=e.fetchWageChunksForAssignment,i=e.upsertWageChunksForAssignment,s=r.a.useState([]),o=Object(k.a)(s,2),c=o[0],u=o[1];function d(e){return function(n){var a=c.map((function(t,a){return e!==a?t:Object(l.a)(Object(l.a)({},t),{},{hours:+n})}));i(t,a)}}return r.a.useEffect((function(){a(t)}),[t]),r.a.useEffect((function(){u(n(t))}),[t,n,a]),r.a.createElement("div",null,r.a.createElement("h5",null,t.applicant.first_name," ",t.applicant.last_name),r.a.createElement("div",null,t.position.position_code," ",t.position.position_name),r.a.createElement("div",null,t.hours," hours"),"Wage Chunks:",r.a.createElement("ul",null,c.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement(pa,{title:"Hours",value:e.hours,onChange:d(t)},e.hours)," ","hours at a rate of $",e.rate," from ",e.start_date," ","to ",e.end_date)}))))}));var hr=Object(o.connect)((function(e){var t=Vn(e).selectedAssignmentIds;return{assignments:Ft(e).filter((function(e){return t.includes(e.id)}))}}))((function(e){var t=e.assignments,n=r.a.useState([]),a=Object(k.a)(n,2),i=a[0],s=a[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{onClick:function(){return s(t)}},"View Selected Assignment Details"),i.map((function(e,t){return r.a.createElement(mr,{assignment:e,key:t})})))}));var _r=Object(o.connect)((function(e){var t=Vn(e).selectedAssignmentIds;return{assignments:Ft(e).filter((function(e){return t.includes(e.id)}))}}),{offerForAssignmentCreate:xn,offerForAssignmentEmail:Dn,offerForAssignmentNag:Fn,offerForAssignmentWithdraw:In,setOfferForAssignmentAccepted:kn,setOfferForAssignmentRejected:Nn})((function(e){var t=e.assignments,n=e.offerForAssignmentCreate,a=e.offerForAssignmentEmail,i=e.offerForAssignmentNag,s=e.offerForAssignmentWithdraw,o=e.setOfferForAssignmentAccepted,c=e.setOfferForAssignmentRejected;return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,null,r.a.createElement(h.a,{onClick:function(){var e,a=Object(N.a)(t);try{for(a.s();!(e=a.n()).done;){var r=e.value;n(r)}}catch(i){a.e(i)}finally{a.f()}}},"Create Offer"),r.a.createElement(h.a,{onClick:function(){var e,n=Object(N.a)(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;s(a)}}catch(r){n.e(r)}finally{n.f()}}},"Withdraw Offer"),r.a.createElement(h.a,{onClick:function(){var e,n=Object(N.a)(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;a(r)}}catch(i){n.e(i)}finally{n.f()}}},"Email Offer"),r.a.createElement(h.a,{onClick:function(){var e,n=Object(N.a)(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;i(a)}}catch(r){n.e(r)}finally{n.f()}}},"Nag Offer"),r.a.createElement(h.a,{onClick:function(){var e,n=Object(N.a)(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;o(a)}}catch(r){n.e(r)}finally{n.f()}}},"Set as Accepted"),r.a.createElement(h.a,{onClick:function(){var e,n=Object(N.a)(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;c(a)}}catch(r){n.e(r)}finally{n.f()}}},"Set as Rejected")))}));function vr(){var e=r.a.useState(!1),t=Object(k.a)(e,2),n=t[0],a=t[1];return r.a.createElement("div",null,r.a.createElement(h.a,{onClick:function(){a(!0)}},"Add Assignment"),r.a.createElement(Ua,null),r.a.createElement(fr,{show:n,onHide:function(){a(!1)}}),r.a.createElement("div",null,r.a.createElement(hr,null)),r.a.createElement("div",null,r.a.createElement(_r,null)))}var gr={template_name:"",template_file:""};var br=Object(o.connect)((function(e){return{contractTemplates:Je(e),availableTemplates:Ke(e)}}),{upsertContractTemplate:Ze,fetchAllContractTemplates:Ge})((function(e){var t=e.show,n=e.onHide,a=void 0===n?function(){}:n,i=e.contractTemplates,s=e.availableTemplates,o=e.upsertContractTemplate,c=e.fetchAllContractTemplates,u=r.a.useState(gr),l=Object(k.a)(u,2),d=l[0],p=l[1];r.a.useEffect((function(){t?c():p(gr)}),[t,c]);var f=function(e,t){var n={delayShow:"",immediateShow:""};_a(e.template_name)&&_a(e.template_file)||(n.delayShow="A template name and template file is required");var a=t.find((function(t){return _a(t.template_name)===_a(e.template_name)}));return a&&(n.immediateShow=r.a.createElement("p",null,"Another contract template exists with name=",e.template_name,":"," ",r.a.createElement("b",null,a.template_name," ",a.template_file))),n}(d,i);return r.a.createElement(ua.a,{show:t,onHide:a},r.a.createElement(ua.a.Header,{closeButton:!0},r.a.createElement(ua.a.Title,null,"Add Contract Template")),r.a.createElement(ua.a.Body,null,r.a.createElement(Ga,{contractTemplate:d,setContractTemplate:p,availableTemplates:s}),f.immediateShow?r.a.createElement(ha.a,{variant:"danger"},f.immediateShow):null),r.a.createElement(ua.a.Footer,null,r.a.createElement(h.a,{onClick:a,variant:"light"},"Cancel"),r.a.createElement(h.a,{onClick:function(){o(d),a()},title:f.delayShow||"Create Contract Template",disabled:!!f.delayShow||!!f.immediateShow},"Create Contract Template")))})),Er=Object(o.connect)((function(e){return{contractTemplates:Je(e)}}))(aa);function Sr(){var e=r.a.useState(!1),t=Object(k.a)(e,2),n=t[0],a=t[1];return r.a.createElement("div",null,r.a.createElement(h.a,{onClick:function(){a(!0)}},"Add Contract Template"),r.a.createElement(Er,null),r.a.createElement(br,{show:n,onHide:function(){a(!1)}}))}function Or(){return r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/"},r.a.createElement(d.a,{to:"/tapp"})),r.a.createElement(d.b,{exact:!0,path:"/tapp/sessions"},r.a.createElement(or,null)),r.a.createElement(d.b,{exact:!0,path:"/tapp/contract_templates"},r.a.createElement(Sr,null)),r.a.createElement(d.b,{exact:!0,path:"/tapp/instructors"},r.a.createElement(ba,null)),r.a.createElement(d.b,{exact:!0,path:"/tapp/positions"},r.a.createElement(dr,null)),r.a.createElement(d.b,{exact:!0,path:"/tapp/assignments"},r.a.createElement(vr,null)),r.a.createElement(d.b,{exact:!0,path:"/dashboard"},r.a.createElement(er,null)),r.a.createElement(d.b,{exact:!0,path:"/cp"},r.a.createElement(nr,null)))}var yr=n(924);function wr(e){return r.a.createElement(p.a.Link,Object.assign({as:c.b,activeClassName:"text-dark"},e),e.children)}function jr(e){var t=e.routes,n=void 0===t?[]:t,a=e.infoComponents,i=void 0===a?null:a;return 0===n.length?r.a.createElement("div",null,"No Routes in Header"):r.a.createElement(f.a,{bg:"light",variant:"light"},r.a.createElement(f.a.Brand,null,r.a.createElement(yr.a,{title:n.map((function(e){return r.a.createElement(d.b,{path:e.route,key:e.route},e.name)}))},n.filter((function(e){return!e.hidden})).map((function(e){return r.a.createElement(yr.a.Item,{key:e.route,as:"span",tabIndex:"0"},r.a.createElement(wr,{to:e.route,title:e.description},e.name))})))),r.a.createElement(p.a,{className:"mr-auto"},n.map((function(e){return r.a.createElement(d.b,{path:e.route,key:e.route},(e.subroutes||[]).map((function(t){var n="".concat(e.route).concat(t.route);return r.a.createElement(wr,{to:n,key:n,title:t.description},t.name)})))}))),i.map((function(e,t){return r.a.createElement("div",{key:t},e)})))}n(167);var Cr=n(395),Tr=r.a.forwardRef((function(e,t){var n=e.children,a=e.style,i=e.className,s=e.clearFilter,o=r.a.useState(""),c=Object(k.a)(o,2),u=c[0],l=c[1];r.a.useEffect((function(){s&&l("")}),[s]);var d=r.a.Children.toArray(n).filter((function(e){return!u.trim()||e.props.children.toLowerCase().includes(u.trim())})),p=0===n.length?"No Available Sessions":"No Matching Sessions";return r.a.createElement("div",{style:a,className:i,ref:t},r.a.createElement(Cr.a,{autoFocus:!0,className:"mx-3 my-2 w-auto",placeholder:"Type to filter...",title:"Filter sessions",onChange:function(e){l(e.currentTarget.value)},value:u,tabIndex:0}),r.a.createElement("ul",{className:"list-unstyled my-0"},d.length>0?d:r.a.createElement("li",{className:"dropdown-item text-muted"},p)))}));function Ar(e){var t=e.items,n=e.activeItemId,a=e.clearFilter;return r.a.createElement(Bn.a.Menu,{as:Tr,clearFilter:a},t.map((function(e,t){return r.a.createElement(Bn.a.Item,{key:e.id,eventKey:t,active:n===e.id},e.name)})))}function kr(){return r.a.createElement(jr,{routes:[{route:"/tapp",name:"TAPP",description:"TAPP Main View",subroutes:[{route:"/sessions",name:"Sessions",description:"Manage Sessions"},{route:"/contract_templates",name:"Contract Templates",description:"Manage Contract Templates"},{route:"/instructors",name:"Instructors",description:"Manage Instructors"},{route:"/positions",name:"Positions",description:"Manage Positions"},{route:"/assignments",name:"Assignments",description:"Manage Assignments"},{route:"/summary",name:"Summary",description:"Overivew of all data"}]},{route:"/cp",name:"CP",description:"Contract Presentment",subroutes:[{route:"/statistics",name:"Statistics",description:"See statistics about accepted/rejected contracts"}]},{route:"/dashboard",name:"Dashboard",description:"List of all widgets",hidden:!0}],infoComponents:[r.a.createElement(xr,null),r.a.createElement(Fr,null)]})}var Nr,Ir={setActiveSession:ln},xr=Object(o.connect)((function(e){return{sessions:pn(e),activeSession:fn(e)}}),Ir)((function(e){var t=e.sessions,n=void 0===t?[]:t,a=e.activeSession,i=e.setActiveSession,s=r.a.useState(!1),o=Object(k.a)(s,2),c=o[0],u=o[1],l=a?a.id:null,d=l?r.a.createElement("span",{className:"text-primary mr-2"},a.name):r.a.createElement("span",{className:"text-secondary mr-2"},"Select a Session");return r.a.createElement(Ea.a,null,"Selected session:",r.a.createElement(Bn.a,{onSelect:function(e){i(n[e])},onToggle:function(e){return u(e)},show:c},r.a.createElement(Bn.a.Toggle,{split:!0,variant:"light"},d),r.a.createElement(Ar,{items:n,activeItemId:l,clearFilter:!c})))})),Dr={setActiveUserRole:Yt},Fr=Object(o.connect)((function(e){return{activeUser:tn(e),activeRole:nn(e)}}),Dr)((function(e){var t=r.a.useState(!1),n=Object(k.a)(t,2),a=n[0],i=n[1],s=e.activeUser,o=void 0===s?{utorid:"<noid>",roles:[]}:s,c=e.activeRole,u=e.setActiveUserRole,l=o.roles,d=c?r.a.createElement("span",{className:"text-primary mr-2"},c):r.a.createElement("span",{className:"text-secondary mr-2"},"Select a role"),p=function(e){return c===e};return r.a.createElement(Ea.a,null,"Login: ",o.utorid," as",r.a.createElement(Bn.a,{onSelect:function(e){u(l[e])},onToggle:function(e){return i(e)},show:a,alignRight:!0},r.a.createElement(Bn.a.Toggle,{split:!0,variant:"light"},d),r.a.createElement(Bn.a.Menu,{flip:!0},(l||[]).map((function(e,t){return r.a.createElement(Bn.a.Item,{key:t,eventKey:t,active:p(e)},e)})))))})),Pr=(n(910),n(911),function(e){Object(M.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(B.a)(this,n),t.apply(this,arguments)}return Object(Jn.a)(n,[{key:"componentDidMount",value:function(){this.props.initFromStage("pageLoad")}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(kr,null),r.a.createElement(Or,null),r.a.createElement(Kn,null))}}]),n}(r.a.Component)),Rr=Object(o.connect)((function(e){return{globals:Ht(e)}}),{initFromStage:Zt})(Pr),Ur=n(399),Hr=n(255),Lr=n(400),Br=n.n(Lr),qr=n(927),Mr=Object(ae.createReducer)({},Object(te.a)({},"SET_GLOBALS",(function(e,t){return Object(l.a)(Object(l.a)({},e),t.payload)}))),Zr=Object(ae.createReducer)({selectedAssignmentIds:[]},Object(te.a)({},"SET_SELECTED_ROWS",(function(e,t){return Object(l.a)(Object(l.a)({},e),{},{selectedAssignmentIds:t.payload})}))),Gr=oe({model:oe({status:se({ongoingInteraction:!1,ongoingInteractionsList:[]},(Nr={},Object(te.a)(Nr,"API_INTERACTION_START",(function(e,t){return Object(l.a)(Object(l.a)({},e),{},{ongoingInteraction:!0,ongoingInteractionsList:[].concat(Object(ka.a)(e.ongoingInteractionsList),[t.payload])})})),Object(te.a)(Nr,"API_INTERACTION_END",(function(e,t){var n=e.ongoingInteractionsList.filter((function(e){return e.id!==t.payload.id}));return Object(l.a)(Object(l.a)({},e),{},{ongoingInteraction:n.length>0,ongoingInteractionsList:n})})),Nr)),sessions:le,positions:Ce,applicants:me,applications:we,assignments:St,instructors:Te,contractTemplates:Ue,users:de}),ui:oe({notifications:O.reducer,form:qr.a,offerTable:Zr,globals:Mr})}),Wr=n(403),Jr=function(){var e={key:"root",storage:Br.a,whitelist:["auth","application"]},t=Object(Hr.a)(e,Gr),n=Object(ne.createStore)(t,Object(Ur.composeWithDevTools)(Object(ne.applyMiddleware)(Wr.a)));return{store:n,persistor:Object(Hr.b)(n)}}(),Kr=Jr.store,Vr=Jr.persistor,zr=function(e){return r.a.createElement(r.a.Fragment,null,e.children)};zr=function(e){return r.a.createElement("div",{id:"dev-frame",className:"bg-info"},r.a.createElement("div",{id:"dev-frame-header"},r.a.createElement(f.a,{expand:!0,variant:"dark"},r.a.createElement(f.a.Brand,{href:"#/",title:"View TAPP in development mode in a framed window."},"Dev Mode"),r.a.createElement(p.a,{className:"mr-auto"},r.a.createElement(Mn,{to:"/dashboard"},"Dashboard")),r.a.createElement(p.a,{className:"mr-auto"},r.a.createElement(Mn,{to:"/api-docs"},"API Docs")),r.a.createElement(f.a.Collapse,{className:"justify-content-end"},r.a.createElement(Gn,null),r.a.createElement(Wn,null)))),r.a.createElement("div",{id:"dev-frame-body"},r.a.createElement("div",{id:"dev-frame-body-inner"},r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/api-docs"},r.a.createElement(Un.a,{spec:Zn,docExpansion:"list"})),r.a.createElement(d.b,null,e.children)))),r.a.createElement("div",{id:"dev-frame-footer"}))};var Yr;Yr=Rr,s.a.render(r.a.createElement(c.a,null,r.a.createElement(o.Provider,{store:Kr},r.a.createElement(u.a,{persistor:Vr},r.a.createElement(zr,null,r.a.createElement(Yr,null))))),document.getElementById("root"))}},[[409,1,2]]]);
//# sourceMappingURL=main.423e30ee.chunk.js.map